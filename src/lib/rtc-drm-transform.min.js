function t(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(t){try{c(s.next(t))}catch(t){i(t)}}function a(t){try{c(s.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((s=s.apply(t,e||[])).next())}))}const e=p;var n,s;!function(){const t=p,e=f();for(;;)try{if(346020===parseInt(t(196))/1*(parseInt(t(198))/2)+parseInt(t(213))/3*(parseInt(t(191))/4)+parseInt(t(194))/5+-parseInt(t(197))/6+parseInt(t(192))/7*(parseInt(t(199))/8)+parseInt(t(193))/9+parseInt(t(208))/10*(-parseInt(t(195))/11))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const r=navigator&&navigator[e(209)]||"",i=navigator&&navigator[e(207)]||"",o=!!(null===(n=null===RTCRtpSender||void 0===RTCRtpSender?void 0:RTCRtpSender[e(202)])||void 0===n?void 0:n[e(200)]),a=!!(null===window||void 0===window?void 0:window[e(210)]),c=r[e(206)](e(201)),u=!c&&i.includes(e(211)),d=!c&&!u&&r.includes(e(203)),h=!c&&!u&&!d&&r[e(206)]("Chrome"),l=(null===(s=null===navigator||void 0===navigator?void 0:navigator[e(205)])||void 0===s?void 0:s[e(212)])||(null===navigator||void 0===navigator?void 0:navigator[e(212)])||"";function f(){const t=["3UDxwhP","2825418CXojGd","15286DpykwF","8CxXdNB","createEncodedStreams","Firefox","prototype","Edg","Win32","userAgentData","includes","vendor","10QxfZMt","userAgent","RTCRtpScriptTransform","Apple","platform","162kavJSu","2572mZgFBS","1879073MkrGDU","3872142mcIOXG","3435220ZaVYLu","6890939BglxlB"];return(f=function(){return t})()}function p(t,e){const n=f();return(p=function(t,e){return n[t-=191]})(t,e)}const m={supportsEncodedStreams:o,supportsRtpScriptTransform:a,isFirefox:c,isSafari:u,isEdge:d,isChrome:h,platform:l,isWindows:"Windows"===l||l===e(204)};function y(t,e){const n=S();return(y=function(t,e){return n[t-=416]})(t,e)}const g=y;!function(){const t=y,e=S();for(;;)try{if(772103===-parseInt(t(436))/1+parseInt(t(440))/2+-parseInt(t(446))/3*(parseInt(t(445))/4)+parseInt(t(423))/5*(-parseInt(t(426))/6)+-parseInt(t(427))/7+-parseInt(t(448))/8*(-parseInt(t(424))/9)+-parseInt(t(437))/10*(-parseInt(t(425))/11))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();class w{constructor(t){this[y(431)]=t}[g(433)](...t){const e=g;b[e(422)]>=4&&console.debug(this[e(431)],...t)}info(...t){const e=g;b[e(422)]>=3&&console[e(449)](this[e(431)],...t)}[g(435)](...t){const e=g;b[e(422)]>=2&&console[e(435)](this.tag,...t)}[g(417)](...t){const e=g;b[e(422)]>=1&&console[e(417)](this.tag,...t)}}function v(t){return new w(t)}const b={logLevel:3,mediaDumps:{video:{in:{durationMs:0,delimited:!0},out:{durationMs:0}},audio:{in:{durationMs:0},out:{durationMs:0}}}};function I(){const t=g;return(new Date)[t(450)]()[t(416)](11,-1)}function A(t,e){const n=g,s=new Uint8Array((0|t.byteLength)+(0|e[n(430)]));return s.set(t,0),s.set(e,0|t.byteLength),s}function S(){const t=["3969048OQRuyK","info","toISOString","slice","error","replace","targetDurationMs","substring","startTimestampMs","logLevel","24385OPOPvx","9VpWCmk","8577943QrEVDj","822TuJEpe","1783096aDpZsK","revokeObjectURL","application/octet-stream","byteLength","tag","createObjectURL","debug","mediaBuffer","warn","944880QKyUpN","20LKTNTu","href","download","1964756Xwqvla","containerFileExt","click","mediaType","endTimestampMs","318620ByzoNv","15nmFjJL","createElement"];return(S=function(){return t})()}class E{constructor(t,e,n){const s=g;this.mediaBuffer=null,this.startTimestampMs=-1,this[s(444)]=-1,this[s(443)]=t,this[s(441)]=e,this.targetDurationMs=n,n>0&&(this[s(434)]=new Uint8Array(0))}append(t,e){const n=g;if(!this.mediaBuffer)return!1;if(this[n(434)]=A(this[n(434)],t),void 0!==e)if(-1===this[n(421)])this[n(421)]=e,this[n(444)]=e+this[n(419)];else if(e>=this[n(444)]){const t=(new Date)[n(450)]()[n(420)](0,19)[n(418)](/:/g,"-"),e=this[n(443)]+"-"+t+"."+this[n(441)];return function(t,e,n=g(429)){const s=g,r=document[s(447)]("a"),i=new Blob([t],{type:n});r[s(438)]=URL[s(432)](i),r[s(439)]=e,r[s(442)](),URL[s(428)](r.href)}(this.mediaBuffer,e),this[n(434)]=null,!1}return!0}}const U=T;function T(t,e){const n=C();return(T=function(t,e){return n[t-=131]})(t,e)}var k,D;!function(){const t=T,e=C();for(;;)try{if(887513===parseInt(t(144))/1*(-parseInt(t(163))/2)+parseInt(t(155))/3+parseInt(t(165))/4*(parseInt(t(147))/5)+parseInt(t(164))/6*(parseInt(t(151))/7)+-parseInt(t(134))/8*(-parseInt(t(158))/9)+parseInt(t(143))/10+-parseInt(t(146))/11)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();class R{constructor(t){const e=T;this[e(133)]=[],this[e(152)]=[],this[e(157)]=0,this[e(135)]=0,this[e(153)]=8,this[e(138)]=0,this[e(160)]=1,this[e(131)]=1,this[e(156)]=0;const n=new M(t);(function(t){t.u(1),t.u(4);const e=t.u(1),n=t.u(1);t.u(1),e&&t.u(8),n&&t.leb128()})(n),this[e(132)]=n.u(3),n.u(1);const s=n.u(1);if(s)this.seq_level_idx.push(n.u(5)),this[e(152)][e(140)](0);else{let t=0,s=1;n.u(1)&&(n.u(32),n.u(32),n.u(1),n.u(1)&&n[e(141)](),t=n.u(1),t&&(s=n.u(5)+1,n.u(32),n.u(5),n.u(5)));const i=n.u(1),o=n.u(5)+1;this[e(133)]=[];for(var r=0;r<o;r++){n.u(12);const r=n.u(5);if(this[e(133)][e(140)](r),this[e(152)].push(r>7?n.u(1):0),t){n.u(1)&&(n.u(s),n.u(s),n.u(1))}i&&n.u(1)&&n.u(4)}}const i=n.u(4)+1,o=n.u(4)+1;if(this[e(149)]=n.u(i)+1,this[e(161)]=n.u(o)+1,!s&&n.u(1)&&(n.u(4),n.u(3)),n.u(1),n.u(1),n.u(1),!s){n.u(1),n.u(1),n.u(1),n.u(1);const t=n.u(1);let e;t&&(n.u(1),n.u(1)),e=n.u(1)?function(t,e,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(t):s?s.value:e.get(t)}(k,k,"f",D):n.u(1),e>0&&(n.u(1)||n.u(1)),t&&n.u(3)}n.u(1),n.u(1),n.u(1),this.parseColorConfig(n)}[U(145)](t){const e=U;this[e(157)]=t.u(1),2===this[e(132)]&&this[e(157)]?(this[e(135)]=t.u(1),this[e(153)]=this[e(135)]?12:10):this[e(132)]<=2&&(this[e(153)]=this.high_bitdepth?10:8),this[e(138)]=1===this.seq_profile?0:t.u(1);let n=2,s=2,r=2;if(t.u(1)&&(n=t.u(8),s=t.u(8),r=t.u(8)),this[e(138)])return t.u(1),this.chroma_subsampling_x=1,this[e(131)]=1,void(this[e(156)]=0);1===n&&13===s&&0===r?(this[e(160)]=0,this.chroma_subsampling_y=0):(t.u(1),0===this[e(132)]?(this[e(160)]=1,this[e(131)]=1):1===this[e(132)]?(this[e(160)]=0,this[e(131)]=0):12===this[e(153)]?(this[e(160)]=t.u(1),this[e(131)]=this[e(160)]?t.u(1):0):(this[e(160)]=1,this[e(131)]=0),this.chroma_subsampling_x&&this.chroma_subsampling_y&&(this[e(156)]=t.u(2))),t.u(1)}}function C(){const t=["18lSCxEu","leb128","chroma_subsampling_x","height","nbits","1027244cUTlYr","234fdGcWM","144mwzuoV","bitpos","bits","chroma_subsampling_y","seq_profile","seq_level_idx","5779648KpUiKE","twelve_bit","bitsleft","length","monochrome","bytepos","push","uvlc","cntbits","13033490MeBYfo","1fDWNdZ","parseColorConfig","51553601TPVGVa","121475GzHhXS","load","width","buffer","312158pFVDpr","seq_tier","bit_depth","byteLength","2177337oYfvKA","chroma_sample_position","high_bitdepth"];return(C=function(){return t})()}k=R,D={value:2};class M{constructor(t){const e=U;this.buffer=t,this[e(137)]=t[e(154)],this[e(139)]=0,this[e(167)]=0,this[e(162)]=0}[U(148)](){const t=U;for(;this[t(162)]<=24&&this.bytepos<this[t(137)];){const e=this[t(150)][this[t(139)]++];this[t(167)]|=e<<24-this[t(162)],this[t(162)]+=8}}static[U(142)](t){let e=1;for(;1<<e<t;)e++;return e}[U(166)](){const t=U;return 8*this[t(139)]-this[t(162)]}[U(136)](){const t=U;return 8*this.length-this[t(166)]()}u(t){const e=U;let n=0;for(;t>0;){n<<=t;const s=t>24?24:t;this.load(),n|=this[e(167)]>>>32-s,this[e(167)]<<=s,this.nbits-=s,t-=s}return n>>>0}[U(141)](){let t=0;for(;!this.u(1);)++t;return t>=32?0:this.u(t)+(1<<t)-1}[U(159)](){let t=0;for(let e=0;e<8;++e){const n=this.u(8);if(t|=(127&n)<<7*e,!(128&n))break}return t}ns(t){let e=M[U(142)](t),n=(1<<e)-t,s=this.u(e-1);return s<n?s:(s<<1)-n+this.u(1)}su(t){let e=this.u(t),n=1<<t-1;return e&n?e-2*n:e}}const x=H;!function(){const t=H,e=q();for(;;)try{if(105003===parseInt(t(137))/1*(-parseInt(t(175))/2)+parseInt(t(261))/3*(-parseInt(t(255))/4)+parseInt(t(434))/5*(parseInt(t(215))/6)+parseInt(t(425))/7*(parseInt(t(270))/8)+-parseInt(t(366))/9*(parseInt(t(282))/10)+-parseInt(t(443))/11*(-parseInt(t(409))/12)+-parseInt(t(244))/13*(parseInt(t(281))/14))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const L=v(x(437)),F=m.isSafari,B=(t,e,n,s)=>{const r=x,i=s.BYTES_PER_ELEMENT||1;e*=i,n*=i;const o=(u=t)instanceof ArrayBuffer?u:u[x(146)],a=(t[r(299)]||0)+t[r(372)],c=(t[r(299)]||0)+e;var u;let d=Math[r(312)](0,Math.min(c,a)),h=Math[r(345)](d+Math[r(312)](n,0),a);return d/=i,h/=i,new s(o,d,h-d)};function P(t,e=0,n=1/0){return B(t,e,n,Uint8Array)}function N(t){const e=x,n=Array[e(152)](t)[e(346)]((t=>t[e(280)](0)));return new Uint8Array(n)}function O(t){const e=function(t){const e=x;let n="";for(let s=0;s<t[e(233)];s+=16e3){const r=t[e(385)](s,s+16e3);n+=String[e(294)][e(271)](null,r)}return n}(P(t));return btoa(e)}function H(t,e){const n=q();return(H=function(t,e){return n[t-=123]})(t,e)}function q(){const t=["12922WxfRdp","generatePlayReadyHeader","revokeObjectURL","height","bind","audioCodec","flush","parseSPS","appendBufferError","concat","No OBUs found","8ALihdp","remove","saio","reduce","seq_profile","POSITIVE_INFINITY","257622PlqMMB","payload","mp4track","mp4a","Opus","getUint8","size","onMSEOpen","Discontinuity!","8muBQeL","apply","codec","ext","stsd","STSZ","volume","FTYP","[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","schm","charCodeAt","1274eACOxc","170dwAYIA","video","Browser does not support codec","<DATA>","webkitsourceclose","onError","bufferControllers","monochrome","tkhd","av1","smhd","avcC","fromCharCode","keyId","seq_level_idx","RedFrameHdr","NDR","byteOffset","appendBuffer","parseUnit","startsWith","trak","licenseUrl","skipLZ","getFramePayload","irrecoverableError","endOfStream","keyFrame","getTrackID","videoElement","max","function","mfhd","isReady","videoSampleAuxInfo","VMHD","AUD","UNKNOWN","remux"," samples - expected 1","</DATA>","bit_depth","readUShort","dbgMediaDump","IDR","4.3.0.0","esds","remuxer","sourceBuffer","high_bitdepth","[MSE] source buffer error","STCO","releaseBuffer","waitingForKeyFrame","TileList","skipEG","encryption","hdlr","av1C","channelCount","SMHD","pssh","warn","min","map","destroy","start",'<WRMHEADER xmlns="',"string","av01","trun","trex","sourceclose","timestamp gap: ","readSPS"," - ","FrameHdr","parseSequenceHeader","doAppend","mdhd","ManagedMediaSource","audio","vmhd","twelve_bit","27171fvwUTu","chroma_subsampling_x","duration","adding ","getNri","setUint32","byteLength","indexOf","dts","Reserved","parseHeader","abort","mediaSource","moof","addAudioTrack","[MSE] sourceopen","isfmb","initialized","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","subarray","queue","saiIvSize","buffer error","getData","enca","error","Metadata","discardData","saiz","timescale","mediaDumps","dOps","onReady","set","STSD","traf","node","mseEnded","mvex","</PROTECTINFO>","nri","feed","reset","2002404TdHteJ","com.widevine","reportDiscontinuity","initSegment","mdat","sinf","h264","message","sourceopen","readyState","</KID>","chroma_sample_position","ready","track","readUByte",": NRI: ","1383802uxpoNP","getPayload","SeqHdr","STSC","timestamp","mseReady","addSourceBuffer","data","drm","4095ptyukN","parser"," track","[MUX]","isvcl","readEG","TempDelim","encrypted","end","11GtqNTF","No A/V data","len","readBits","minf","AV1","setUint16","setupMSE","onBuffer","trackTypes","getSize","moov","getElementById","[MSE] buffer error:","videoCodec","config","out","seqHdrObu","STTS","ended","webkitsourceopen","removeSourceBuffer","PPS","padStart","cenc","TileGroup","nextDts","shift","SEI","mse","Frame","seqHdr","mediasource is not available to end: ","[H264Parser] IDR without SPS/PPS, not suitable for recovery","dispatch","Padding","dref","TYPES","toString","tenc","prototype","addEventListener","splice","65599LETWIu","hasRedundancy","Failure: Browser doesn't support MSE/MMS","chroma_subsampling_y","<KIDS>","width","index","createObjectURL","stbl","buffer","durationMs","units","setData","isKeyFrame","[H264Parser] No VCL NALUs found","from","skipBits","tfdt","calculateExpectedSizeFromSai","append","Num frames in chunk: ","readUInt","box","sampleAuxInfo","stype","avc1.","tfhd","endMSE","schi","audioSampleAuxInfo","tracks","skipScalingList","buffered","mvhd","sdtp","ntype","encv","bitLength","2haFCce","options","DINF","[MSE] sourceclose","samples","hasSize","pps","debug","stsz","getBits","url","audiosamplerate","assign","H264","seq_tier","keySystem","slice","MediaSource","remuxController","mdia",'/mp4; codecs="',"mp4","isTypeSupported","parsePPS","patchSampleAuxinfo","isReset","call","bitsAvailable","assembleFrames","<LA_URL>","SPS","Unsupported DRM type ","initBrowser","</LA_URL>","skipUEG","<PROTECTINFO>","frma","seq","extractNALUs","updating","876XEsHAB","dependsOn","org.w3.clearkey","sps","push","listener","readyToDecode","type","addVideoTrack","onBufferError","disableRemotePlayback","stsc","readUEG","offAll","getPayloadSize","HDLR_TYPES"," (remove)","readBoolean","length","createBuffer","senc","ceil","mediaDuration","types","onMSEClose","</KIDS>","com.microsoft.playready.recommendation","resetTrack","flags"];return(q=function(){return t})()}class V{static get[x(298)](){return 1}static get[x(326)](){return 5}static get[x(471)](){return 6}static get[x(205)](){return 7}static get[x(465)](){return 8}static get AUD(){return 9}static get[x(131)](){const t=x;return{[V[t(326)]]:"IDR",[V.SEI]:"SEI",[V[t(205)]]:t(205),[V[t(465)]]:t(465),[V[t(298)]]:t(298),[V.AUD]:t(318)}}static[x(222)](t){const e=x;return t[e(172)]in V[e(131)]?V[e(131)][t.ntype]:e(319)}constructor(t){const e=x;this.payload=t,this[e(406)]=(96&this[e(262)][0])>>5,this[e(172)]=31&this[e(262)][0],this[e(438)]=1==this.ntype||5==this[e(172)],this[e(161)]="",this[e(382)]=!1}[x(132)](){const t=x;return V[t(222)](this)+t(424)+this[t(370)]()}[x(370)](){return this[x(406)]}[x(222)](){return this.ntype}isKeyFrame(){const t=x;return this[t(172)]===V[t(326)]}getPayload(){return this[x(262)]}[x(229)](){return this.payload.byteLength}[x(453)](){return 4+this[x(229)]()}[x(389)](){const t=x,e=new Uint8Array(this[t(453)]());return new DataView(e.buffer)[t(371)](0,this[t(453)]()-4),e[t(399)](this[t(426)](),4),e}}class K{constructor(t){const e=x;this.data=t,this[e(143)]=0,this.bitLength=8*t[e(372)]}[x(149)](t){const e=x;this[e(432)]=t,this[e(143)]=0,this[e(174)]=8*t[e(372)]}get[x(202)](){const t=x;return this[t(174)]-this[t(143)]}[x(153)](t){const e=x;if(this[e(202)]<t)return!1;this[e(143)]+=t}[x(446)](t,e=!0){const n=x;return this[n(184)](t,this[n(143)],e)}[x(184)](t,e,n=!0){const s=x;if(this.bitsAvailable<t)return 0;const r=e%8,i=this.data[e/8|0]&255>>>r,o=8-r;if(o>=t)return n&&(this[s(143)]+=t),i>>o-t;{n&&(this[s(143)]+=o);const r=t-o;return i<<r|this[s(184)](r,e+o,n)}}[x(305)](){const t=x;let e;for(e=0;e<this.bitLength-this[t(143)];++e)if(0!==this[t(184)](1,this[t(143)]+e,!1))return this[t(143)]+=e,e;return e}[x(209)](){const t=x;this[t(153)](1+this[t(305)]())}skipEG(){this[x(153)](1+this.skipLZ())}[x(227)](){const t=x,e=this[t(305)]();return this[t(446)](e+1)-1}[x(439)](){const t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}[x(232)](){return 1===this.readBits(1)}[x(423)](t=1){return this[x(446)](8*t)}[x(324)](){return this[x(446)](16)}[x(158)](){return this[x(446)](32)}}class j{static[x(213)](t,e){const n=x,s=t[n(372)]!==e;let r=[],i=!1,o=!1,a=!1,c=!1,u=0,d=0,h=0,l=[];for(;u<=t.byteLength;){if(u<t.byteLength){const e=t[u++];0!==e?(1===e&&d>1&&(h=d>2?4:3,l.push(u)),d=0):++d}else h=0,l.push(u++);if(l.length>1){const e=l.shift(),n=l[0]-h;if(e<n){let h=!1;const l=31&t[e];if(l===V.NDR?o=!0:l===V.IDR?i=!0:l===V.SPS?(h=a,a=!0):l===V.PPS&&(h=c,c=!0),!h)if(!s||l!==V.NDR&&l!==V.IDR)r.push(t.subarray(e,n));else{const s=new Uint8Array(n-e);let i=0;for(u=e,d=0;u<n;){let e=t[u++];d>1&&3===e&&(d=0,e=t[u++]),0!==e?d=0:++d,s[i++]=e}r.push(s.subarray(0,i))}}}}let f=!0,p=!1;return o||i?o&&i&&(L.warn(n(278)),f=!1):(L.warn(n(151)),f=!1),i&&(a&&c?p=!0:L[n(344)](n(127))),f?{keyFrame:p,units:r}:{keyFrame:!1,units:[]}}static assembleFrames(t){const e=x;let n=[],s=[],r=!1,i=!1;for(let o of t){let t=new V(o);t.type()!==V.IDR&&t.type()!==V[e(298)]||j[e(376)](t),n[e(233)]&&i&&(t.isfmb||!t[e(438)])&&(s[e(219)]({units:n,keyFrame:r}),n=[],r=!1,i=!1),n[e(219)](t),r=r||t[e(150)](),i=i||t[e(438)]}if(n.length)if(i)s[e(219)]({units:n,keyFrame:r});else{let t=s.length-1;t>=0&&(s[t][e(148)]=s[t][e(148)][e(253)](n))}return 1!==s[e(233)]&&L.warn(e(157)+s.length),s}static[x(168)](t,e){let n,s=8,r=8;for(let i=0;i<e;i++)0!==r&&(n=t.readEG(),r=(s+n+256)%256),s=0===r?s:r}static readSPS(t){const e=x;let n,s,r,i,o,a,c=new K(t),u=0,d=0,h=0,l=0,f=1;if(c[e(423)](),n=c[e(423)](),c.readBits(5),c[e(153)](3),c[e(423)](),c.skipUEG(),100===n||110===n||122===n||244===n||44===n||83===n||86===n||118===n||128===n){var p=c[e(227)]();if(3===p&&c[e(153)](1),c[e(209)](),c[e(209)](),c[e(153)](1),c[e(232)]()){a=3!==p?8:12;for(let t=0;t<a;++t)c[e(232)]()&&(t<6?j.skipScalingList(c,16):j.skipScalingList(c,64))}}c.skipUEG();var m=c[e(227)]();if(0===m)c[e(227)]();else if(1===m){c[e(153)](1),c.skipEG(),c[e(337)](),s=c.readUEG();for(let t=0;t<s;++t)c[e(337)]()}if(c[e(209)](),c[e(153)](1),r=c[e(227)](),i=c[e(227)](),o=c[e(446)](1),0===o&&c[e(153)](1),c[e(153)](1),c[e(232)]()&&(u=c[e(227)](),d=c[e(227)](),h=c[e(227)](),l=c.readUEG()),c.readBoolean()){if(c[e(232)]()){let t;switch(c.readUByte()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[c[e(423)]()<<8|c[e(423)](),c[e(423)]()<<8|c.readUByte()]}t&&t[0]>0&&t[1]>0&&(f=t[0]/t[1])}c[e(232)]()&&c[e(153)](1),c[e(232)]()&&(c[e(153)](4),c[e(232)]()&&c[e(153)](24)),c[e(232)]()&&(c[e(209)](),c[e(209)]()),c[e(232)]()&&(c[e(158)](),c[e(158)](),c[e(232)]())}return{width:Math[e(236)]((16*(r+1)-2*u-2*d)*f),height:(2-o)*(i+1)*16-(o?2:4)*(h+l)}}static[x(376)](t){const e=x;let n=new K(t.getPayload());n[e(423)](),t.isfmb=0===n[e(227)](),t[e(161)]=n[e(227)]()}constructor(t){const e=x;this[e(329)]=t,this[e(422)]=t[e(263)]}[x(251)](t){const e=x,n=j[e(356)](new Uint8Array(t));this[e(422)][e(142)]=n.width,this[e(422)][e(247)]=n.height,this[e(422)][e(415)][e(218)]=[new Uint8Array(t)],this[e(422)][e(272)]=e(162);let s=new DataView(t[e(146)],t[e(299)]+1,4);for(let t=0;t<3;++t){let n=s[e(266)](t)[e(132)](16);n[e(233)]<2&&(n="0"+n),this[e(422)][e(272)]+=n}}[x(198)](t){const e=x;this[e(422)].h264[e(181)]=[new Uint8Array(t)]}[x(301)](t){const e=x;let n=!1;switch(t[e(222)]()){case V[e(326)]:case V[e(298)]:n=!0;break;case V[e(465)]:this[e(422)].h264[e(181)][e(233)]||(this.parsePPS(t[e(426)]()),!this.remuxer[e(221)]&&this[e(422)][e(415)][e(218)][e(233)]&&this[e(422)][e(415)][e(181)][e(233)]&&(this[e(329)][e(221)]=!0)),n=!0;break;case V.SPS:this[e(422)][e(415)].sps[e(233)]||(this[e(251)](t[e(426)]()),!this[e(329)].readyToDecode&&this.track[e(415)][e(218)][e(233)]&&this[e(422)][e(415)][e(181)][e(233)]&&(this[e(329)].readyToDecode=!0)),n=!0;break;case V.AUD:break;case V[e(471)]:n=!0}return n}}class _{static get[x(427)](){return 1}static get[x(440)](){return 2}static get[x(358)](){return 3}static get[x(468)](){return 4}static get[x(392)](){return 5}static get[x(124)](){return 6}static get[x(297)](){return 7}static get TileList(){return 8}static get[x(129)](){return 15}static get[x(131)](){const t=x;return{[_.SeqHdr]:t(427),[_[t(440)]]:t(440),[_[t(358)]]:t(358),[_.TileGroup]:"TileGroup",[_[t(392)]]:t(392),[_[t(124)]]:t(124),[_.RedFrameHdr]:t(297),[_[t(336)]]:t(336),[_[t(129)]]:"Padding"}}static[x(222)](t){const e=x;return t[e(222)]in _[e(131)]?_[e(131)][t[e(222)]]:e(375)}constructor(t,e){const n=x;this[n(262)]=t;const s=t[0];this[n(222)]=(120&s)>>>3,this[n(273)]=(4&s)>>>2,this[n(180)]=(2&s)>>>1,this.isKeyFrame=e}[x(132)](){return""+_[x(222)](this)}getPayload(){return this[x(262)]}[x(229)](){return this.payload.byteLength}getSize(){return this.getPayloadSize()}[x(389)](){return this[x(426)]()}}function z(t,e){const n=new Uint8Array(e);let s=0;for(;s<e;){let e=127&t|128;n[s++]=e,t>>=7}return n[e-1]&=127,n}class W{static extractOBUs(t){let e=[],n=0;for(;n<t.byteLength;){const s=n,r=t[n++],i=(120&r)>>3;(4&r)>>2&&++n;const o=n;let a=n;if((2&r)>>1){let e=0;for(let s=0;s<8;++s){if(n>=t.byteLength)return L.warn("Truncated OBU"),{obus:[]};const r=t[n++];if(e|=(127&r)<<7*s,!(128&r))break}a=n,n+=e}else n=t.byteLength;if(i!==_.TempDelim&&i!==_.Padding&&i!==_.RedFrameHdr&&i!==_.TileList&&n>s)if(n>t.byteLength){const n=z(t.byteLength-a,a-o),r=t.subarray(s);r.set(n,o-s),e.push(r)}else e.push(t.subarray(s,n))}return{units:e}}static assembleFrames(t,e){const n=x;let s=[];for(let r of t)s[n(219)](new _(r,e));return[{units:s,keyFrame:e}]}constructor(t){const e=x;this[e(329)]=t,this[e(422)]=t[e(263)]}[x(359)](t){const e=x;this[e(422)][e(291)][e(460)]=t;const n=this[e(422)][e(291)][e(125)]=new R(t);this[e(422)][e(142)]=n[e(142)],this[e(422)][e(247)]=n[e(247)],this[e(422)][e(272)]="av01."+n[e(259)]+"."+n[e(296)][0][e(132)]()[e(466)](2,"0")+(n[e(189)][0]?"H":"M")+"."+n[e(323)][e(132)]().padStart(2,"0")+"."+n[e(289)]+"."+n.chroma_subsampling_x+n[e(140)]+n[e(420)]}[x(301)](t){const e=x;return t[e(222)]===_[e(427)]&&(this[e(359)](t.getPayload()),this[e(329)][e(221)]=!0),!0}}class G{constructor(t){const e=x;this[e(220)]={},this[e(222)]=""|t}on(t,e){const n=x;return!this.listener[t]&&(this.listener[t]=[]),this.listener[t][n(219)](e),!0}off(t,e){const n=x;if(this.listener[t]){var s=this.listener[t][n(373)](e);return s>-1&&this[n(220)][t][n(136)](s,1),!0}return!1}[x(228)](){this[x(220)]={}}[x(128)](t,e){const n=x;return!!this[n(220)][t]&&(this[n(220)][t].map((t=>{t[n(271)](null,[e])})),!0)}}class J{constructor(t){const e=x;this[e(433)]=t,this.saiIvSize={video:t[e(458)][e(283)]?.encryption===e(467)?16:0,audio:t.config[e(363)]?.[e(338)]===e(467)?16:0},J[e(238)]={avc1:[],encv:[],avcC:[],av1C:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let t in J[e(238)])J[e(238)][t]=[t[e(280)](0),t[e(280)](1),t.charCodeAt(2),t[e(280)](3)];const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);J[e(230)]={video:n,audio:s};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);J[e(461)]=J[e(428)]=J[e(333)]=i,J[e(275)]=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),J[e(317)]=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),J[e(342)]=new Uint8Array([0,0,0,0,0,0,0,0]),J.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,54]),a=new Uint8Array([0,0,0,0]);let c=[105,115,111,54,100,97,115,104,99,109,102,99,99,109,102,50];"H264"===t[e(458)][e(283)]?.[e(272)]?c[e(219)](97,118,99,49):"AV1"===t.config[e(283)]?.[e(272)]&&c[e(219)](97,118,48,49),J[e(277)]=J[e(159)](J.types.ftyp,o,a,new Uint8Array(c)),J[e(177)]=J[e(159)](J.types.dinf,J[e(159)](J[e(238)][e(130)],r))}static[x(159)](t,...e){const n=x;let s,r=8,i=e[n(233)],o=i;for(;i--;)e[i]&&(r+=e[i][n(372)]);for(s=new Uint8Array(r),s[0]=r>>>24,s[1]=r>>>16&255,s[2]=r>>>8&255,s[3]=255&r,s[n(399)](t,4),i=0,r=8;i<o;++i)e[i]&&(s[n(399)](e[i],r),r+=e[i][n(372)]);return s}[x(339)](t){const e=x;return J[e(159)](J.types[e(339)],J.HDLR_TYPES[t])}[x(413)](t){const e=x;return J[e(159)](J[e(238)][e(413)],t)}[x(361)](t,e){const n=x;return J[n(159)](J.types[n(361)],new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,0,0,0,0,85,196,0,0]))}[x(194)](t){const e=x;return J[e(159)](J.types[e(194)],this[e(361)](t.timescale,t.duration),this[e(339)](t[e(222)]),this[e(447)](t))}[x(314)](t){const e=x;return J[e(159)](J[e(238)][e(314)],new Uint8Array([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[x(447)](t){const e=x;return"audio"===t.type?J.box(J.types.minf,J[e(159)](J[e(238)][e(292)],J[e(342)]),J.DINF,this[e(145)](t)):J.box(J.types[e(447)],J.DINF,this[e(145)](t),J[e(159)](J.types[e(364)],J[e(317)]))}[x(379)](t,e,n){const s=x;return J[s(159)](J.types[s(379)],this[s(314)](t),this.traf(n,e))}[x(454)](t,e,n){const s=x;let r=t[s(233)],i=[];for(;r--;)i[r]=this[s(303)](t[r]);return J[s(159)][s(271)](null,[J[s(238)][s(454)],this.mvhd(n,e),this[s(343)](t)][s(253)](i).concat(this[s(404)](t)))}[x(404)](t){const e=x;let n=t[e(233)],s=[];for(;n--;)s[n]=this[e(353)](t[n]);return J[e(159)].apply(null,[J[e(238)][e(404)]].concat(s))}mvhd(t,e){const n=x;let s=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return J[n(159)](J[n(238)][n(170)],s)}sdtp(t){const e=x;let n=t[e(179)]||[],s=new Uint8Array(4+n.length);for(let t=0;t<n[e(233)];t++){const r=n[t][e(243)];s[t+4]=r[e(216)]<<4|r.isDependedOn<<2|r[e(138)]}return J.box(J[e(238)][e(171)],s)}[x(145)](t){const e=x;return J.box(J[e(238)][e(145)],this.stsd(t),J[e(159)](J.types.stts,J.STTS),J.box(J[e(238)][e(226)],J[e(428)]),J[e(159)](J[e(238)][e(183)],J.STSZ),J[e(159)](J[e(238)].stco,J[e(333)]))}avcC(t){const e=x;let n=[],s=[];for(let s=0;s<t.h264[e(218)][e(233)];s++){const r=t[e(415)].sps[s],i=r[e(372)];n[e(219)](i>>>8&255),n[e(219)](255&i),n=n[e(253)](Array[e(134)][e(191)].call(r))}for(let n=0;n<t[e(415)][e(181)][e(233)];n++){const r=t[e(415)][e(181)][n],i=r[e(372)];s[e(219)](i>>>8&255),s[e(219)](255&i),s=s[e(253)](Array[e(134)][e(191)].call(r))}return J[e(159)](J[e(238)][e(293)],new Uint8Array([1,n[3],n[4],n[5],255,224|t[e(415)].sps[e(233)]].concat(n)[e(253)]([t[e(415)].pps.length])[e(253)](s)))}[x(340)](t){const e=x,n=t[e(291)][e(125)];return J[e(159)](J[e(238)].av1C,new Uint8Array([129,n[e(259)]<<3|n[e(296)][0],n[e(189)][0]<<7|n[e(331)]<<6|n[e(365)]<<5|n[e(289)]<<4|n[e(367)]<<3|n[e(140)]<<2|n[e(420)],0,...t[e(291)][e(460)]]))}[x(173)](t){const e=x,n=t[e(272)][e(191)](0,4),s=n===e(351)?this.av1C(t):this.avcC(t),r=J.box(J[e(238)][e(414)],J[e(159)](J[e(238)][e(211)],N(n)),J[e(159)](J[e(238)][e(279)],new Uint8Array([0,0,0,0,...N(this.drm[e(458)].video.encryption),0,1,0,0])),J.box(J[e(238)][e(165)],this[e(133)](e(283)))),i=t[e(142)],o=t[e(247)];return J[e(159)](J[e(238)].encv,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,o>>>8&255,255&o,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,65,86,"av01"===n?49:67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),s,r)}[x(328)](t){const e=x;let n=t[e(458)][e(372)],s=new Uint8Array(26+n+3);return s.set([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5,n]),s.set(t[e(458)],26),s.set([6,1,2],26+n),s}[x(264)](t){const e=x,n=t[e(186)];return J.box(J.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>>8&255,255&n,0,0]),J[e(159)](J.types[e(328)],this.esds(t)))}[x(397)](t){const e=x,n=t[e(186)];return new Uint8Array([0,t[e(341)],1,56,0,0,n>>>8&255,255&n,0,0,0])}[x(265)](t){const e=x,n=t[e(186)];return J[e(159)](J[e(238)][e(265)],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(341)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),J[e(159)](J[e(238)][e(397)],this[e(397)](t)))}[x(390)](t){const e=x,n=J[e(159)](J[e(238)][e(397)],this[e(397)](t)),s=J[e(159)](J.types[e(414)],J[e(159)](J[e(238)][e(211)],new Uint8Array([79,112,117,115])),J.box(J.types[e(279)],new Uint8Array([0,0,0,0,...N(this.drm[e(458)][e(363)][e(338)]),0,1,0,0])),J[e(159)](J[e(238)][e(165)],this[e(133)](e(363)))),r=t[e(186)];return J[e(159)](J[e(238)][e(390)],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(341)],0,16,0,0,0,0,r>>>8&255,255&r,0,0]),n,s)}[x(274)](t){const e=x;return t[e(222)]===e(363)?J[e(159)](J[e(238)][e(274)],J[e(400)],t[e(441)]?this[e(390)](t):this[e(265)](t)):J.box(J[e(238)][e(274)],J[e(400)],this[e(173)](t))}[x(290)](t){const e=x,n=t.id,s=t[e(368)],r=t[e(142)],i=t[e(247)],o=t[e(276)];return J[e(159)](J.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,255&o,o%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>>8&255,255&r,0,0,i>>>8&255,255&i,0,0]))}traf(t,e){const n=x,s=t.id,r=t[n(179)][0].size,i=t.samples[0][n(368)],o=t[n(179)][0][n(243)],a=J[n(159)](J[n(238)][n(163)],new Uint8Array([0,2,0,58,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,1,i>>>24,s>>>16&255,i>>>8&255,255&i,r>>>24,r>>>16&255,r>>>8&255,255&r,0,o.isNonSync,0,0])),c=J.box(J.types[n(154)],new Uint8Array([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e]));if(t[n(441)]){let e,s;if("video"===t[n(222)]?(e=!0,s=this[n(387)][n(283)]+t[n(179)][0][n(160)]?.byteLength):(e=!1,s=this[n(387)][n(363)]),s>0){const r=this[n(394)](s),i=this[n(235)](t[n(179)],e),o=r[n(233)]+20+i[n(233)]+a.length+c[n(233)]+8+16+8+8,u=this[n(352)](t,o);return J[n(159)](J.types[n(401)],a,c,u,r,this[n(257)](o-i.length+u[n(233)]+8),i)}{const e=this[n(235)](null,!1),s=e[n(233)]+a[n(233)]+c.length+8+16+8+8,r=this[n(352)](t,s);return J[n(159)](J[n(238)][n(401)],a,c,r,e)}}return J[n(159)](J[n(238)].traf,a,c,this[n(352)](t,a[n(233)]+c.length+8+16+8+8))}[x(303)](t){const e=x;return t[e(368)]=t[e(368)]||4294967295,J[e(159)](J[e(238)][e(303)],this[e(290)](t),this.mdia(t))}[x(353)](t){const e=x,n=t.id;return J.box(J[e(238)][e(353)],new Uint8Array([0,0,0,0,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}[x(352)](t,e){const n=x;let s=(t[n(179)]||[])[n(233)],r=new Uint8Array(12);return e+=20,r[n(399)]([0,0,0,1,s>>>24,s>>>16&255,s>>>8&255,255&s,e>>>24,e>>>16&255,e>>>8&255,255&e],0),J[n(159)](J[n(238)][n(352)],r)}generatePlayReadyHeader(t,e){const n=x,s=n(327),r=n(384),i=O(function(t){const e=x,n=[];return n.push(t[3]),n[e(219)](t[2]),n[e(219)](t[1]),n[e(219)](t[0]),n[e(219)](t[5]),n[e(219)](t[4]),n[e(219)](t[7]),n[e(219)](t[6]),(t=P(t))[e(399)](n,0),t}(t));return P(function(t,e){const n=x,s=new Uint8Array(2*t[n(233)]),r=new DataView(s[n(146)]);for(let s=0;s<t[n(233)];++s){const i=t[n(280)](s);r[n(449)](2*s,i,e)}return s[n(146)]}([n(349)+r+'" version="'+s+'">',n(285),n(210),n(141),'<KID ALGID="AESCTR" ','VALUE="'+i+'"',">",n(419),n(240),n(405),e?n(204)+e+n(208):"",n(322),"</WRMHEADER>"].join(""),!0))}[x(343)](t){const e=x;if(this[e(433)][e(190)][e(302)](e(410)))return J.box(J[e(238)][e(343)],new Uint8Array([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[e(433)][e(458)][t[0][e(222)]][e(295)]]));if(this[e(433)][e(190)]===e(241)){const n=this[e(245)](this[e(433)].config[t[0].type][e(295)],this.drm[e(304)]),s=n[e(372)];return J[e(159)](J[e(238)][e(343)],new Uint8Array([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,s>>>24,s>>>16&255,s>>>8&255,255&s,...n]))}return this[e(433)][e(190)]===e(217)?J[e(159)](J[e(238)][e(343)],new Uint8Array([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm[e(458)][t[0][e(222)]][e(295)],0,0,0,0])):"com.apple.fps"===this[e(433)].keySystem?null:void L[e(391)](e(206)+this[e(433)][e(190)])}[x(133)](t){const e=x;let n,s,r=this[e(433)][e(458)][t];return"cbcs"===r[e(338)]?(n=new Uint8Array([16,...r.iv]),s=25):(n=new Uint8Array([]),s=0),J[e(159)](J.types[e(133)],new Uint8Array([1,0,0,0,0,s,1,this[e(387)][t],...r[e(295)],...n]))}[x(394)](t){const e=x;return J[e(159)](J[e(238)][e(394)],new Uint8Array([0,0,0,0,t,0,0,0,1]))}[x(257)](t){const e=x;return J[e(159)](J[e(238)][e(257)],new Uint8Array([0,0,0,0,0,0,0,1,t>>>24,t>>>16&255,t>>>8&255,255&t]))}senc(t,e){const n=x;let s=null;return t&&(1!==t[n(233)]&&L[n(391)]("Received "+t[n(233)]+n(321)),s=t[0].sampleAuxInfo),s&&s[n(372)]?J[n(159)](J.types[n(235)],new Uint8Array([0,0,0,e?2:0,0,0,0,1,...s])):J.box(J.types[n(235)],new Uint8Array([0,0,0,0,0,0,0,1]))}[x(412)](t,e,n){const s=x,r=this[s(454)](t,e,n);let i=new Uint8Array(J.FTYP[s(372)]+r[s(372)]);return i[s(399)](J[s(277)]),i[s(399)](r,J[s(277)][s(372)]),i}}let Y=1;class Q{constructor(){this.seq=1}static[x(310)](){return Y++}[x(393)](){const t=x;this.mp4track[t(445)]=0,this.mp4track.samples=[]}[x(315)](){const t=x;return!(!this[t(221)]||!this[t(179)].length)}}class X extends Q{constructor(t,e){const n=x;super(),this[n(221)]=!0,this[n(469)]=0,this[n(374)]=0,this[n(263)]={id:Q[n(310)](),type:"audio",channelCount:2,audiosamplerate:48e3,len:0,timescale:e,duration:e,samples:[],codec:"opus",encrypted:!0},this[n(179)]=[]}[x(242)](){const t=x;this.seq=1,this[t(469)]=0,this.dts=0}[x(320)](t,e,n){const s=x;if(t[s(233)]>0)for(let r=0;r<t.length;r++){let i=t[r],o=i[s(148)],a=o[s(372)];this[s(179)][s(219)]({units:o,size:a,duration:i.duration,sampleAuxInfo:e,timestamp:n}),this[s(263)].len+=a}}[x(306)](){const t=x;if(!this.samples)return null;let e,n=this[t(263)].samples;for(;this.samples[t(233)];){let s=this[t(179)][t(470)](),r=(1e3*s.timestamp|0)-this.nextDts|0;r<5&&(r=5),this[t(374)]=this.nextDts,this[t(469)]+=r,e={size:s[t(267)],duration:r,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:s.sampleAuxInfo};let i=new Uint8Array(s[t(267)]);return i.set(s.units,0),n[t(219)](e),new Uint8Array(i[t(146)],0,s[t(267)])}return null}}class Z extends Q{constructor(t,e,n){const s=x;super(),this[s(221)]=!1,this.nextDts=0,this[s(374)]=0,this[s(311)]=n,this[s(263)]={id:Q[s(310)](),type:s(283),codec:t,len:0,h264:{sps:[],pps:[]},av1:{sequenceHeader:""},width:0,height:0,timescale:e,duration:e,samples:[],encrypted:!0},this[s(179)]=[],"H264"===t?this[s(435)]=new j(this):t===s(448)&&(this[s(435)]=new W(this))}resetTrack(){const t=x;this[t(212)]=1,this[t(221)]=!1,this[t(263)][t(415)][t(218)]=[],this.mp4track.h264.pps=[],this[t(263)][t(291)].seqHdr=null,this[t(469)]=0,this[t(374)]=0}[x(320)](t,e,n){const s=x;for(let r of t){let t=[],i=0;for(let e of r[s(148)])this[s(435)].parseUnit(e)&&(t[s(219)](e),i+=e[s(453)]());t.length>0&&this[s(221)]&&(this[s(263)].len+=i,this[s(179)][s(219)]({units:t,size:i,keyFrame:r.keyFrame,duration:r.duration,sampleAuxInfo:e,timestamp:n}))}}getFramePayload(){const t=x;if(!this[t(315)]()||!this[t(179)])return null;let e,n=this[t(263)].samples,s=this[t(179)][t(470)](),r=s[t(148)],i=(1e3*s[t(429)]|0)-this.nextDts|0;i<5&&(i=5),i>5e3&&L[t(182)](t(355)+(i/1e3|0)+" s"),this[t(374)]=this[t(469)],this[t(469)]+=i,e={size:s[t(267)],duration:i,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:s.keyFrame?0:1,dependsOn:s[t(309)]?2:1},sampleAuxInfo:s[t(160)]};let o=0;for(const e of r)o+=e[t(453)]();let a=0,c=new Uint8Array(o);for(const e of r)c[t(399)](e[t(389)](),a),a+=e[t(453)]();return n[t(219)](e),new Uint8Array(c[t(146)],0,o)}}class $ extends G{constructor(t,e){const n=x;super("remuxer"),this[n(383)]=!1,this[n(452)]=[],this[n(167)]={},this.timescale=1e3,this.mediaDuration=0,this[n(311)]=t,this[n(196)]=e}[x(223)](t){const e=x;L[e(182)]("adding "+t+" track"),this.tracks.video=new Z(t,this[e(395)],this[e(311)]),this[e(452)][e(219)](e(283))}[x(380)](t){const e=x;L[e(182)](e(369)+t+e(436)),this.tracks[e(363)]=new X(t,this[e(395)]),this[e(452)][e(219)](e(363))}[x(408)](){const t=x;for(let e of this[t(452)])this[t(167)][e].resetTrack();this[t(383)]=!1}[x(347)](){const t=x;this[t(167)]={},this[t(228)]()}flush(){const t=x;if(this[t(383)])for(let e of this.trackTypes){let n=this.tracks[e];for(;;){let s=n[t(306)]();if(!s||!s[t(372)])break;let r={type:e,payload:A(this.mp4.moof(n.seq++,n[t(374)],n[t(263)]),this[t(196)][t(413)](s)),dts:n[t(374)]};this[t(128)](t(146),r),n.discardData()}}else this[t(315)]()&&(this.dispatch(t(421)),this[t(412)](),this[t(383)]=!0,this[t(250)]())}[x(412)](){const t=x;for(let e of this.trackTypes){let n=this[t(167)][e],s={type:e,payload:this[t(196)].initSegment([n[t(263)]],this[t(237)],this.timescale)};this[t(128)](t(146),s)}}[x(315)](){const t=x;for(let e of this[t(452)])if(!this[t(167)][e][t(221)]||!this.tracks[e][t(179)][t(233)])return!1;return!0}[x(320)](t){const e=x;for(let n of this[e(452)]){let s=t[n];if(s[e(233)]>0){this.tracks[n].remux(s,"audio"===n?t[e(166)]:t.videoSampleAuxInfo,t[e(429)])}}this[e(250)]()}}class tt extends G{constructor(t,e,n){const s=x;super(s(146)),this[s(222)]=e,this[s(386)]=new Uint8Array;const r=b[s(396)][e]?.[s(459)][s(147)];r>0&&(this[s(325)]=new E(e,s(196),r)),this.sourceBuffer=t,this.mse=n,this[s(307)]=!1,this[s(330)].addEventListener(s(391),(t=>{const e=s;L[e(344)](e(332),t,this[e(222)]),this[e(307)]=!0,this[e(128)]("error",{type:this[e(222)],name:e(146),error:e(388)})}))}destroy(){const t=x;this.queue=null,this.dbgMediaDump=null;try{this.sourceBuffer&&(this[t(330)][t(377)](),this[t(123)][t(464)](this[t(330)]),this[t(330)]=null)}catch(t){}this.offAll()}doAppend(){const t=x;if(this[t(386)][t(233)]&&this.sourceBuffer&&!this[t(330)][t(214)]){if(this[t(330)][t(169)][t(233)]>1){for(let e=0;e<this[t(330)].buffered[t(233)];++e){const n=e<this[t(330)][t(169)].length-1;L[t(182)]("Buffered range "+e+(n?t(231):"")+": "+this[t(330)][t(169)][t(348)](e)+t(357)+this.sourceBuffer[t(169)][t(442)](e)),n&&this[t(330)][t(256)](this[t(330)].buffered[t(348)](e),this[t(330)].buffered.end(e))}if(this.sourceBuffer.updating)return}try{this[t(330)][t(300)](this[t(386)]),this[t(386)]=new Uint8Array}catch(e){this[t(128)](t(391),{type:this.type,name:t(252),error:e})}}}feed(t,e){const n=x;this[n(325)]&&(this[n(325)][n(156)](t,e)||(this[n(325)]=null)),this.irrecoverableError||(this[n(386)]=A(this[n(386)],t)),this[n(360)]()}}class et extends G{static isSupported(t){const e=x;return window.ManagedMediaSource?window[e(362)].isTypeSupported(t):!!window[e(192)]&&window[e(192)][e(197)](t)}constructor(t){const e=x;super("jmuxer"),this[e(307)]=!1,this[e(335)]=!0,this[e(200)]=!1,this[e(430)]=!1,this[e(403)]=!1;this[e(176)]=Object[e(187)]({},{node:"",debug:!1,onReady:function(){},onError:function(t){}},t),this[e(402)]=typeof this[e(176)][e(402)]===e(350)?document[e(455)](this.options.node):this[e(176)][e(402)],this[e(433)]=t[e(433)],this[e(196)]=new J(this[e(433)]),this.remuxController=new $(this[e(402)],this[e(196)]),this[e(176)].videoCodec&&this[e(193)][e(223)](this[e(176)][e(457)]),this[e(176)][e(249)]&&this.remuxController.addAudioTrack(this[e(176)][e(249)]),this.remuxController.on("buffer",this[e(451)][e(248)](this)),this[e(193)].on("ready",this[e(234)].bind(this)),this[e(207)]()}[x(207)](){const t=x;"string"==typeof this[t(176)][t(402)]&&""==this[t(176)].node&&L[t(391)]("no video element were found to render, provide a valid video element"),this[t(430)]=!1,this.setupMSE()}[x(450)](){const t=x;if(!window[t(362)]&&!window[t(192)])throw t(139);window[t(362)]?(this[t(402)][t(225)]=!0,this[t(378)]=new ManagedMediaSource):this[t(378)]=new MediaSource,this[t(185)]=URL[t(144)](this[t(378)]),this[t(402)].src=this[t(185)],this[t(403)]=!1,this[t(378)].addEventListener(t(417),this[t(268)][t(248)](this)),this[t(378)][t(135)](t(354),this[t(239)][t(248)](this)),this[t(378)][t(135)](t(463),this[t(268)][t(248)](this)),this[t(378)][t(135)](t(286),this.onMSEClose[t(248)](this)),this.mediaSource[t(135)]("error",(function(e){const n=t;L.error("[MSE] error: ",e[n(416)])}))}endMSE(){const t=x;if(!this.mseEnded)try{this[t(403)]=!0,"open"===this[t(378)][t(418)]&&this[t(378)][t(308)]()}catch(e){L[t(391)](t(126),e)}}[x(411)](){const t=x;L[t(182)](t(269)),this[t(335)]=!0}[x(407)](t){const e=x;let n={video:[],audio:[]};if(this[e(307)]||this[e(403)])return-1;if(!t||!this.remuxController)return-1;if(t.video){n[e(429)]=t[e(429)];const s=this[e(155)](t[e(316)],this[e(196)][e(387)][e(283)]);let r=null;if(this[e(176)][e(457)]===e(188)){if(r=j.extractNALUs(t.video,s),!r[e(148)][e(233)])return L.warn("No NALUs found"),0}else if("AV1"===this[e(176)].videoCodec&&(r=W.extractOBUs(t[e(283)]),!r[e(148)][e(233)]))return L.warn(e(254)),0;if(this[e(335)]){if(!t[e(150)]&&!r[e(309)])return 0;this.waitingForKeyFrame=!1}if(this[e(176)].videoCodec===e(188)){if(!F&&t.videoSampleAuxInfo){const n=r[e(148)][e(258)](((t,n)=>t+4+n[e(372)]),0);n!==s&&this[e(199)](t[e(316)],this.mp4[e(387)][e(283)],n-s)}n[e(283)]=j[e(203)](r.units)}else"AV1"===this[e(176)].videoCodec&&(n[e(283)]=W[e(203)](r[e(148)],t[e(150)]));n.videoSampleAuxInfo=t[e(316)]}return t[e(363)]&&(n[e(429)]=t[e(429)],n[e(363)]=[{units:t[e(363)]}],n[e(166)]=t[e(166)]),t.video||t[e(363)]?(this[e(193)][e(320)](n),0):(L[e(391)](e(444)),0)}[x(155)](t,e){if(!t)return 0;const n=(t[0]<<8)+t[1],s=e+2+4;let r=0,i=2;for(;0<n&&i+s<=t.byteLength;){i+=e;const n=(t[i]<<8)+t[i+1],s=(t[i+2]<<24)+(t[i+3]<<16)+(t[i+4]<<8)+t[i+5];i+=6,r+=n+s}return r}patchSampleAuxinfo(t,e,n){const s=x;let r=2;if(0<(t[0]<<8)+t[1]&&r+(e+2+4)<=t[s(372)]){r+=e;let s=(t[r]<<8)+t[r+1];s+=n,s>=0&&(t[r]=s>>>8&255,t[r+1]=255&s)}return 0}[x(234)](){const t=x;if(this[t(430)]&&this[t(193)]&&this[t(193)][t(315)]()&&!this[t(288)]){this[t(288)]={};for(let e in this[t(193)][t(167)]){let n=this[t(193)].tracks[e];const s=""[t(253)](e,t(195))[t(253)](n[t(263)][t(272)],'"');if(L.debug("Checking codec",s),!et.isSupported(s))return L[t(391)](t(284)),!1;let r=this[t(378)][t(431)](s);this[t(288)][e]=new tt(r,e,this[t(378)]),this[t(288)][e].on(t(391),this.onBufferError[t(248)](this))}}}[x(334)](){const t=x;for(let e in this[t(288)])this[t(288)][e].doAppend()}[x(451)](t){const e=x;this.mseReady&&this[e(288)]&&this[e(288)][t[e(222)]]&&this[e(288)][t[e(222)]][e(407)](t.payload,t[e(374)])}[x(268)](){const t=x;L[t(182)](t(381)),this[t(378)][t(418)]!==t(462)&&(this.mediaSource[t(368)]=Number[t(260)],this[t(430)]=!0,typeof this.options[t(398)]===t(313)&&this[t(176)][t(398)][t(201)](null,this[t(200)]),URL[t(246)](this[t(185)]),this[t(234)]())}onMSEClose(){const t=x;L[t(182)](t(178)),this[t(430)]=!1,this[t(164)]()}[x(224)](t){const e=x;L[e(344)](e(456),t),this.irrecoverableError=!0,this.endMSE(),"function"==typeof this[e(176)][e(287)]&&this.options[e(287)][e(201)](null,t)}}function nt(){var t=["2503960XiNqvK","2.7.0-50dc4f1","3352573fudMkt","8101OHTCPO","12167390AMcQPt","4085289rWOdbW","32710zsaZDV","3eQqtah","134iVlSNJ","1953128YGYnMg","204qhrRKC"];return(nt=function(){return t})()}function st(t,e){var n=nt();return(st=function(t,e){return n[t-=343]})(t,e)}function rt(){return st(351)}function it(t,e){const n=ot();return(it=function(t,e){return n[t-=370]})(t,e)}function ot(){const t=["wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","2690DkEVon","388269RucmJd","2awbwYt","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","development","6ndYcQU","76149BHrJTo","3381220frzVin","176926JNihgb","943020XQmlFC","https://lic.staging.drmtoday.com","from","production","CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8","https://lic.drmtoday.com","140943RYISsI","baseUrl","name","Production","Staging","+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT","atob","160MSTdJK","charCodeAt","27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A","certificate","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo"];return(ot=function(){return t})()}!function(){for(var t=st,e=nt();;)try{if(374751===parseInt(t(353))/1*(parseInt(t(347))/2)+-parseInt(t(346))/3*(-parseInt(t(348))/4)+parseInt(t(345))/5*(parseInt(t(349))/6)+parseInt(t(352))/7+parseInt(t(350))/8+-parseInt(t(344))/9+-parseInt(t(343))/10)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const at=it;!function(){const t=it,e=ot();for(;;)try{if(124745===parseInt(t(390))/1*(-parseInt(t(384))/2)+-parseInt(t(397))/3+parseInt(t(391))/4+parseInt(t(382))/5*(-parseInt(t(387))/6)+-parseInt(t(383))/7+parseInt(t(373))/8*(-parseInt(t(388))/9)+parseInt(t(389))/10)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const ct=at(395)+at(381)+at(380)+"pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT"+at(371)+at(377)+"xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH"+at(385)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/"+at(375)+at(378)+at(379)+"pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw",ut=Uint8Array[at(393)](window[at(372)](ct),(t=>t[at(374)](0)));class dt{constructor(t){this[at(399)]=t}toString(){return this[at(399)]}[at(398)](){const t=at;switch(this[t(399)]){case"staging":return t(392);case t(386):return"https://lic.test.drmtoday.com";default:return t(396)}}[at(376)](){return ut}}function ht(t,e){const n=ft();return(ht=function(t,e){return n[t-=278]})(t,e)}dt[at(370)]=new dt("staging"),dt[at(400)]=new dt(at(394)),dt.Development=new dt(at(386)),function(){const t=ht,e=ft();for(;;)try{if(634285===parseInt(t(300))/1+-parseInt(t(302))/2+parseInt(t(285))/3*(-parseInt(t(291))/4)+parseInt(t(289))/5+-parseInt(t(278))/6*(-parseInt(t(287))/7)+-parseInt(t(292))/8*(-parseInt(t(297))/9)+parseInt(t(303))/10*(-parseInt(t(282))/11))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const lt=v("[RTC-DRM]");function ft(){const t=["buffer","1534621AHcjIE","SampleAuxInfo corrupted (audio)","SampleAuxInfo is missing or corrupted","1095WnYmuy","byteLength","34349IwTAvn","cbcs","2334820krcCon","subarray","6044CJkqtM","40PuNhKc","AV1","cenc","SampleAuxInfo corrupted","getUint8","722772FIkNuI","SampleAuxInfo is missing or corrupted (audio)","getUint16","761747EFRcVJ","data","639322DuTGZZ","10PHuwEi","18wqUhSJ","H264","error"];return(ft=function(){return t})()}const pt=mt;function mt(t,e){const n=Et();return(mt=function(t,e){return n[t-=444]})(t,e)}!function(){const t=mt,e=Et();for(;;)try{if(498459===-parseInt(t(450))/1*(-parseInt(t(464))/2)+parseInt(t(448))/3+-parseInt(t(452))/4+-parseInt(t(463))/5+parseInt(t(447))/6*(parseInt(t(455))/7)+parseInt(t(462))/8*(parseInt(t(460))/9)+-parseInt(t(458))/10)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const yt=Object.freeze({IDR0:0,IDR1:1,Broken:2}),gt=[],wt=[];let vt=0;function bt(t){const e=mt;return 0===gt.length&&function(){const t=mt;gt[t(454)](new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer),gt[t(454)](gt[yt[t(461)]].slice(0)),new Uint8Array(gt[yt[t(451)]])[t(467)]([16,0,50],27),gt.push(new Uint8Array([0,0,0,1,65,154,255,255]).buffer);for(const e of gt)wt[t(454)](e.slice(0))}(),function(){const t=mt;for(const e in yt){if(!Object[t(445)][t(444)][t(466)](yt,e))continue;const n=yt[e];0===wt[n][t(446)]&&(wt[n]=gt[n][t(459)](0))}}(),t?wt[yt[e(465)]]:(vt^=1,wt[vt])}const It=Object[pt(456)]({Key:0,Broken:1}),At=[],St=[];function Et(){const t=["IDR0","1152VMLmWr","2559430IqmXGL","15636GMYgtK","Broken","call","set","hasOwnProperty","prototype","byteLength","1876782ySEJrC","997404lXNoEI","buffer","102vJepjv","IDR1","2891424aIYBQY","Key","push","7JzeSFq","freeze","length","5997080MrjnOH","slice","55638bEqYXl"];return(Et=function(){return t})()}function Ut(t){const e=pt;return 0===At[e(457)]&&function(){const t=pt;At.push(new Uint8Array([10,11,0,0,0,4,60,254,252,255,249,128,64,50,23,16,0,156,0,0,0,176,0,0,128,1,197,121,195,220,135,144,202,149,140,242,104,176]).buffer),At.push(new Uint8Array([50,21,48,3,192,128])[t(449)]);for(const e of At)St[t(454)](e[t(459)](0))}(),function(){const t=pt;for(const e in It){if(!Object[t(445)].hasOwnProperty[t(466)](It,e))continue;const n=It[e];0===St[n][t(446)]&&(St[n]=At[n][t(459)](0))}}(),t?St[It[e(465)]]:St[It[e(453)]]}const Tt=kt;function kt(t,e){const n=Rt();return(kt=function(t,e){return n[t-=383]})(t,e)}!function(){const t=kt,e=Rt();for(;;)try{if(804217===-parseInt(t(463))/1*(-parseInt(t(396))/2)+parseInt(t(478))/3*(parseInt(t(451))/4)+-parseInt(t(430))/5*(parseInt(t(456))/6)+parseInt(t(444))/7*(parseInt(t(386))/8)+parseInt(t(395))/9*(parseInt(t(435))/10)+parseInt(t(449))/11+parseInt(t(385))/12*(-parseInt(t(383))/13))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const Dt=v(Tt(471));function Rt(){const t=["272532QpedaU","sessionId","2016hFspcV","389224XJHORn","isView","max","keystatuseschange","error","fromCharCode","get","[WV] License fetched:","9a04f07998404286ab92e65be0885f95","9eTmlIJ","278xUmvSB","CK license request:","apply","onFetch","rtcdrmerror","set","childNodes","debug","atob","getElementsByTagName","No media keys for media element!","Failed to reuse previous EME session: ","stringify","A128KW","Failed to load previous EME session","createSession","text/xml","append","encode","CDM error generating license request: ","length","oct","warn","expired","keyStatuses","text","No media element available!","isSafari","isFirefox","close","EME createSession(temporary) failed:","licenseUrl","message","No PR challenge data!","1130HsbCxd","buffer","replace","byteOffset"," is not ","14173780XAoMaF","No init data available!","addEventListener","License acquisition failed with error ","has","internal-error","indexOf","Previous lic will be reused","forEach","63dvTHyj","decode","arrayBuffer","load","bind","16591707XHpjWH","update","131896NNfseO","initData","temporary","Challenge","catch","5232GPrFzW","then","generateRequest","target","[PR] License fetched:","dispatchEvent","byteLength","2175MqFgpc","edef8ba979d64acea3c827dcd51d21ed","btoa","Failed to update the session: ","license","Data does not seem to be UTF-16 encoded!","toString","mediaKeys","[CDM]","Failed to update the session","Key ","min","status","floor","kids","78iBDPNc","parseFromString","[PR] Challenge node not found","No clear key test key provided!","POST"];return(Rt=function(){return t})()}let Ct={licenseUrl:"",onFetch:void 0};const Mt={},xt=(t,e,n)=>{const s=Tt,r=Uint8Array.BYTES_PER_ELEMENT;e*=r,n*=r;const i=(c=t)instanceof ArrayBuffer?c:c[Tt(431)],o=t.byteLength,a=e;var c;let u=Math[s(388)](0,Math.min(a,o)),d=Math[s(474)](u+Math[s(388)](n,0),o);return u/=r,d/=r,new Uint8Array(i,u,d-u)};function Lt(t,e,n=!1){const s=Tt;if(!t)return"";let r=t;if(!n&&r[s(462)]%2!=0)throw Dt[s(390)]("Data has an incorrect length, must be even."),new Error(s(468));const i=((t,e=0,n=1/0)=>xt(t,e,n))(r);let o;if((e&&255===i[0]&&254===i[1]||254===i[0]&&255===i[1])&&(r=i.subarray(2)),r instanceof ArrayBuffer)o=r;else{const t=new Uint8Array(ArrayBuffer[s(387)](r)?r.byteLength:r[s(462)]),e=ArrayBuffer[s(387)](r)?new Uint8Array(r[s(431)],r[s(433)],r.byteLength):new Uint8Array(r);if(e[s(431)]instanceof ArrayBuffer)t[s(401)](e);else{const n=new Uint8Array(e[s(462)]);n.set(e),t.set(n)}o=t[s(431)]}const a=Math[s(476)](r[s(462)]/2),c=new Uint16Array(a),u=new DataView(o);for(let t=0;t<a;t++)c[t]=u.getUint16(2*t,e);return function(t){const e=Tt;let n="";for(let s=0;s<t[e(416)];s+=16e3){const e=t.subarray(s,s+16e3);n+=String.fromCharCode.apply(null,e)}return n}(c)}const Ft=t=>{const e=Tt;let n="";for(const s of t){let t=s[e(469)](16);1==t.length&&(t="0"+t),n+=t}return n};let Bt=null;const Pt=t=>{const e=Tt;return window[e(465)](String[e(391)][e(398)](null,t))[e(432)](/\+/g,"-")[e(432)](/\//g,"_")[e(432)](/=*$/,"")},Nt=(t,e)=>{const n=Tt,s=(t=>{const e=Tt,n=JSON.parse((new TextDecoder)[e(445)](t));if(Dt.debug(e(397),n),null===Bt)throw new Error(e(481));const s=[];for(const t of n[e(477)]){const n={kty:e(417),alg:e(409),kid:t,k:Pt(Bt)};s.push(n)}return(new TextEncoder)[e(414)](JSON[e(408)]({keys:s}))})(e.message);e.target[n(450)](s)[n(455)]((function(t){const e=n;Dt[e(390)](e(472),t)}))},Ot=t=>{const e=Tt,n=window[e(404)](t[e(432)](/-/g,"+")[e(432)](/_/g,"/")),s=new Uint8Array(n[e(416)]);for(let t=0;t<n[e(416)];++t)s[t]=n.charCodeAt(t);return s},Ht=(e,n,...s)=>t(void 0,[e,n,...s],void 0,(function*(t,e,n=!1){const s=Tt,r=new Headers(Mt);n&&r[s(413)]("Content-Type",s(412));const i={method:s(482),headers:r,body:e},o=yield Ct[s(399)]?Ct[s(399)](t,i):fetch(t,i);if(!o.ok)throw new Error(s(438)+o[s(475)]);return o})),qt=(t,e)=>{const n=Tt;Ht(Ct.licenseUrl,e[n(428)])[n(457)]((t=>t.json()))[n(457)]((t=>{const s=n;Dt[s(403)](s(393),t[s(467)]);const r=Ot(t[s(467)])[s(431)];e[s(459)][s(450)](r)[s(455)]((t=>{const e=s;Dt.error(e(472),t)}))}))[n(455)]((e=>{const s=n;t[s(461)](new CustomEvent(s(400),{detail:{message:""+e}})),Dt[s(390)](e)}))},Vt=(t,e)=>{const n=Tt,s=((t,e)=>{const n=Tt,s=new DOMParser;try{const t=Lt(e,!0);if(t[n(441)]("<Challenge")>-1){const e=s[n(479)](t,n(412))[n(405)](n(454))[0][n(402)][0].nodeValue;if(null===e)throw new Error(n(429));return Ot(e)}Dt[n(418)](n(480))}catch(e){t[n(461)](new CustomEvent(n(400),{detail:{message:""+e}})),Dt[n(390)](e)}return null})(t,e[n(428)]);if(null===s)return t.dispatchEvent(new CustomEvent(n(400),{detail:{message:n(429)}})),void Dt.error("No PR challenge data!");Ht(Ct[n(427)],s.buffer,!0)[n(457)]((t=>t[n(446)]()))[n(457)]((s=>{const r=n;Dt[r(403)](r(460),s);e.target[r(450)](s).catch((function(e){const n=r;t[n(461)](new CustomEvent("rtcdrmerror",{detail:{message:n(466)+e}})),Dt[n(390)](n(472),e)}))})).catch((e=>{const s=n;t[s(461)](new CustomEvent(s(400),{detail:{message:""+e}})),Dt[s(390)](e)}))},Kt=(t,e)=>{const n=Tt;Ht(Ct.licenseUrl,e.message)[n(457)]((t=>{const e=n,s=t[e(421)]();return Dt[e(403)]("[FPS] License fetched:",t,s),s})).then((t=>{const s=n;e[s(459)][s(450)](Ot(t))}))[n(455)]((e=>{const s=n;t[s(461)](new CustomEvent(s(400),{detail:{message:""+e}})),Dt[s(390)](e)}))},jt=(t,e)=>{Mt[t]=e},_t=m[Tt(423)];let zt=!_t&&!m[Tt(424)];const Wt=new Map;function Gt(e){return t(this,void 0,void 0,(function*(){const t=kt;if(null===e[t(452)])throw new Error(t(436));const n=e[t(459)];if(null===n)throw new Error(t(422));const s=n[t(470)];if(null===s)throw new Error(t(406));const r=Ft(new Uint8Array(e[t(452)])),i=r+n.id;let o=null;Wt[t(439)](i)&&(o=Wt[t(392)](i),null!=o&&o[t(425)](),Wt.delete(i)),Dt[t(403)](o?t(442):"New lic will be requested");let a=null;try{a=s.createSession(zt?"persistent-license":t(453))}catch(e){Dt[t(403)]("EME createSession(persistent) failed:",e)}if(!a&&zt){zt=!1;try{a=s[t(411)](t(453))}catch(e){Dt[t(390)](t(426),e)}}if(a)if(a.addEventListener(t(389),(e=>{const s=t;e[s(459)][s(420)][s(443)](((t,e)=>{const r=s;(t===r(419)||"output-restricted"===t||"output-downscaled"===t||t===r(440))&&n.dispatchEvent(new CustomEvent(r(400),{detail:{message:r(473)+Ft(new Uint8Array(e))+r(434)+"usable for decryption (status: "+t+")",keyId:e}}))}))})),_t?a[t(437)](t(428),Kt[t(448)](null,n),!1):-1!==r.indexOf(t(464))?a.addEventListener(t(428),qt[t(448)](null,n),!1):-1!==r[t(441)](t(394))?a[t(437)](t(428),Vt[t(448)](null,n),!1):a[t(437)](t(428),Nt[t(448)](null,n),!1),o)try{(yield a[t(447)](o[t(384)]))?Wt[t(401)](i,a):n.dispatchEvent(new CustomEvent(t(400),{detail:{message:t(410)}}))}catch(e){n[t(461)](new CustomEvent(t(400),{detail:{message:t(407)+e}}))}else a[t(458)](e.initDataType,e[t(452)]).then((()=>{zt&&Wt[t(401)](i,a)}))[t(455)]((e=>{const s=t;n[s(461)](new CustomEvent(s(400),{detail:{message:s(415)+e}}))}));else n[t(461)](new CustomEvent("rtcdrmerror",{detail:{message:"EME createSession() failed - no DRM available"}}))}))}const Jt=Yt;function Yt(t,e){const n=Ee();return(Yt=function(t,e){return n[t-=432]})(t,e)}!function(){const t=Yt,e=Ee();for(;;)try{if(216626===parseInt(t(644))/1+-parseInt(t(590))/2+-parseInt(t(653))/3+parseInt(t(624))/4+-parseInt(t(514))/5+parseInt(t(674))/6*(-parseInt(t(566))/7)+-parseInt(t(582))/8*(-parseInt(t(544))/9))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const Qt=v("[RTC-DRM]"),Xt=m[Jt(471)],Zt=m[Jt(622)],$t=m[Jt(548)],te=m[Jt(669)],ee=m[Jt(650)],ne=m[Jt(472)],se=m[Jt(518)],re=m[Jt(558)],ie=ee||ne&&"Android"===se,oe=1e6*($t?82:te?220:120),ae=$t?5e3:2e3,ce=$t?1.5:.5;function ue(t){const e=Jt;return typeof t!==e(587)||null===t||t instanceof Element||t instanceof dt?t:function(t){const e=Jt;return!!((null==t?void 0:t[e(537)])instanceof ArrayBuffer&&(null==t?void 0:t[e(539)]))}(t)?t.slice():Array[e(563)](t)?t[e(498)](((t,e,n)=>(t[n]=ue(e),t)),[]):t instanceof Object?Object[e(510)](t).reduce(((e,n)=>(e[n]=ue(t[n]),e)),{}):t}class de{constructor(t){const e=Jt;this[e(576)]="",this[e(565)]="",this[e(474)]="",this[e(613)]=[],this[e(530)]=ue(t),this[e(511)]=null,this[e(645)]=0,this[e(580)]=Date[e(606)](),this[e(626)]=0,this[e(657)]=0,this[e(469)]=-1,this[e(627)]=0,this[e(581)]=0,this[e(505)]=!0,this[e(458)]=!1,this[e(434)]=ae,this[e(585)]=null,this[e(568)]={video:null,audio:null}}}const he=new Map,le=new Uint8Array([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),fe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),pe=new Uint8Array([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function me(t,e){const n=Jt;void 0!==e&&(t[n(530)][n(605)]=e),(void 0===t[n(530)][n(605)]||t[n(530)][n(605)]<0)&&(t[n(530)][n(605)]=100,$t?t[n(530)][n(605)]=900:!te&&re&&(t[n(530)].type===n(479)||t.hwSecurity)&&(t.config[n(605)]=1400))}function ye(t){const e=Jt;let n=!1;if((t[e(530)].video&&t[e(530)][e(567)][e(541)]!==e(607)&&"HW"===t[e(530)][e(567)].robustness||t.config[e(555)]&&"clear"!==t[e(530)][e(555)].encryption&&"HW"===t[e(530)][e(555)][e(506)])&&(n=!0),t[e(553)]=n,me(t,t[e(530)].mediaBufferMs),void 0===t.config[e(446)]){if(void 0===t[e(530)][e(571)]){const n={profile:{purchase:{}},outputProtection:{digital:!0,analogue:!0,enforce:!0}};t.config.sessionId=e(639)+JSON.stringify(n)}const n=Object.assign({sessionId:t.config[e(571)],merchant:t.config[e(528)]},t[e(530)].userId&&{userId:t.config[e(673)]});jt("x-dt-custom-data",window[e(638)](JSON[e(620)](n)))}else jt("x-dt-auth-token",t[e(530)][e(446)]);for(const n of[t.config.audio,t[e(530)][e(567)]])n&&n.encryption!==e(607)&&(n.keyId||(n.keyId=fe),n.iv||(n.iv=pe));t[e(487)]=void 0,t.serverCertificateUrl="",t.licenseUrl="";const s=t.config.environment[e(637)]();var r;t[e(530)][e(649)]===e(612)?(t[e(474)]="org.w3.clearkey",Bt=le):"Widevine"===t[e(530)][e(649)]?(t.keySystem="com.widevine.alpha",re&&n&&(t[e(474)]+=e(529)),t[e(530)][e(572)]?t.serverCertificate=t[e(530)][e(572)]:t[e(530)][e(470)]?t[e(576)]=t[e(530)][e(470)]:t[e(487)]=t.config[e(499)][e(550)](),t[e(530)][e(494)]?t[e(565)]=t[e(530)][e(494)]:t[e(565)]=s+e(551)):"PlayReady"===t.config.type?(t[e(474)]="com.microsoft.playready.recommendation",t[e(530)][e(642)]?t.licenseUrl=t.config[e(642)]:t[e(565)]=s+e(608)):t[e(530)][e(649)]===e(454)&&(t.keySystem=e(485),t[e(530)][e(586)]?t[e(487)]=t[e(530)][e(586)]:t.config[e(521)]?t[e(576)]=t[e(530)].fpsCertificateUrl:t[e(576)]=s+e(660)+t[e(530)][e(528)],t[e(530)][e(525)]?t[e(565)]=t.config[e(525)]:t.licenseUrl=s+e(489)),r={licenseUrl:t[e(565)],onFetch:t.config.onFetch},Ct=r,t[e(613)]=[];let i=["temporary"];if(t[e(530)][e(649)]!==e(454)){$t||i[e(619)](e(453)),t[e(613)].push({initDataTypes:[e(554)],sessionTypes:i});for(const n of[t[e(530)][e(567)],t[e(530)].audio])if(n&&n[e(541)]!==e(607)){const s=n==t[e(530)][e(567)]?e(567):e(555);let r;t[e(530)][e(649)]===e(549)?r="HW"===n[e(506)]?e(516):e(509):t.config.type===e(479)&&(r="HW"===n[e(506)]?e(604):"2000"),s===e(567)?t[e(613)][0][e(625)]=[{contentType:'video/mp4; codecs="avc1.640032"',encryptionScheme:n[e(541)]===e(554)?e(554):e(517),robustness:r||void 0}]:t.emeConfig[0][e(648)]=[{contentType:e(552),encryptionScheme:"cenc"===n[e(541)]?e(554):e(517),robustness:r||void 0}]}}else t[e(613)]=[{initDataTypes:[e(526)],videoCapabilities:[{contentType:e(438),robustness:""}],distinctiveIdentifier:e(441),persistentState:e(441),sessionTypes:i}];Qt[e(651)]("DRM config:",t)}function ge(t){const e=Jt;var n,s;Qt[e(651)](e(538));let r=t[e(530)][e(484)];(!t[e(530)][e(567)]||t[e(530)][e(567)].encryption===e(607))&&(r=t.config[e(618)]),t.jmuxer=null;const i=!t[e(665)]&&t[e(530)].audio&&t[e(530)].audio.encryption!==e(607),o=t[e(530)][e(567)]&&t[e(530)][e(567)].encryption!==e(607);t[e(581)]=0,t[e(505)]=!0,t[e(458)]=!1,t.keyFrameRequestInterval=ae,t[e(626)]=0,t[e(657)]=0,t[e(469)]=-1,t[e(627)]=0,t[e(511)]=new et({node:r,videoCodec:o?null===(n=t[e(530)][e(567)])||void 0===n?void 0:n[e(600)]:void 0,audioCodec:i?null===(s=t.config[e(555)])||void 0===s?void 0:s[e(600)]:void 0,fps:60,drm:t}),te&&t[e(530)].videoElement&&t[e(530)][e(484)][e(507)]()[e(495)]((()=>{}))[e(460)]((()=>{}))}function we(t,e){const n=Jt;0===t[n(626)]&&(t[n(626)]=e.timestamp,t[n(434)]=ae,t[n(580)]=Date[n(606)]()+2e3);let s=null,r=!1;if(e.data[n(672)]<=8?(Qt[n(533)](n(676)),r=!0):(s=function(t,e,n){const s=ht,r=new DataView(t.data),i=t.data[s(286)]-2,o=r.getUint16(i);if(o>=i)return lt[s(280)](s(284)),null;const a=new Uint8Array(o),c=i-o;let u=c,d=0;if(n===s(279)){let t=0;for(;u<i;){let e=r.getUint8(u++);t>1&&3===e&&(t=0,e=r[s(296)](u++)),0!==e?t=0:++t,a[d++]=e}}else if(n===s(293))for(;u<i;){const t=r[s(296)](u++);a[d++]=t}const h=new DataView(a[s(281)]);if(h[s(296)](0)>>>4!=1)return lt[s(280)]("Unsupported SampleAuxInfo version"),null;const l=e===s(294)?16:0,f=l+2+6*h.getUint16(1+l);return d<1+f+2+1?(lt[s(280)](s(295)),null):{sai:a[s(290)](1,1+f),data:new Uint8Array(t[s(301)],0,c),seq:h[s(299)](1+f)}}(e,t[n(530)][n(567)].encryption,t[n(530)][n(567)].codec),!s&&(Qt[n(533)](n(534)),r=!0)),s)if(e[n(649)]===n(496))t.prevSeqNum=s[n(502)];else{if(-1===t[n(469)])return 0;{const i=65535;let o=s[n(502)]-t[n(469)];if(o<-(i>>1)&&(o+=i+1),o<=0)return Qt.debug(n(457)+t.prevSeqNum+n(481)+s[n(502)]),0;o>1&&(r=e[n(649)]!==n(496),Qt.warn(n(475)+t.prevSeqNum+n(654)+s.seq+n(596)+r)),t[n(469)]=s[n(502)]}}let i=0;r&&!t[n(511)][n(594)]&&(i=-1,t.jmuxer[n(561)]());const o=(e[n(634)]-t[n(626)])/9e4;return s&&t.jmuxer[n(677)]({video:s[n(503)],videoSampleAuxInfo:s.sai,timestamp:o,isKeyFrame:e[n(649)]===n(496)})<0&&(i=-1,Qt[n(533)](n(616)),ge(t)),i>=0&&"key"===e[n(649)]&&(t[n(627)]=o),i}function ve(t){const e=Jt,n=t[e(530)][e(484)];if(!n||n[e(623)][e(497)]<1||n[e(658)]||n.currentTime<ce)return;const s=t[e(530)].mediaBufferMs;if(void 0===s||s<0)throw new Error(e(524));const r=n.buffered[e(467)](n.buffered[e(497)]-1),i=1e3*(r-n.currentTime)|0;if(!t[e(466)]&&function(t,e,n){const s=Jt;let r;r=e<3*n>>>2?.875:e<=n?1:e<7*n>>>2?1.125:e<9*n>>>2?1.25:e<11*n>>>2?1.375:1.5,r!==t[s(603)]&&(t[s(603)]=r)}(n,i,s),!(i<s+50||i<5*s>>>2))if(t[e(627)]>n[e(520)]+.1){const i=1e3*(r-t[e(627)])|0;i>40&&i>s-100?(Qt[e(651)](I()+e(557)+(n[e(520)]+e(547)+t.lastKeyFrameTime+" (")+(t[e(627)]-n.currentTime)+")"),n.currentTime=t[e(627)]):Qt.debug(I()+e(583)+i)}else!t[e(505)]&&Date.now()>t[e(580)]&&i>s+100&&i>3*s>>>1&&(Qt[e(651)](I()+e(527)+i+e(488)),t[e(505)]=!0,t[e(434)]<16e3&&(t[e(434)]<<=1))}function be(t,e){const n=Jt;if(!t.jmuxer||t[n(665)])return 0;0===t[n(657)]&&(t.audioStartTimestamp=e.timestamp);const s=function(t,e){const n=ht;if(e===n(288))return{sai:null,data:new Uint8Array(t[n(301)])};const s=new DataView(t.data),r=t[n(301)][n(286)]-2,i=s[n(299)](r);if(i>=r)return lt.error(n(298)),null;const o=new Uint8Array(i),a=r-i;let c=a,u=0;for(;c<r;){const t=s[n(296)](c++);o[u++]=t}return new DataView(o[n(281)])[n(296)](0)>>>4!=1?(lt[n(280)]("Unsupported SampleAuxInfo version (audio)"),null):u<18?(lt[n(280)](n(283)),null):{sai:o[n(290)](1,17),data:new Uint8Array(t.data,0,a)}}(e,t[n(530)][n(555)][n(541)]);if(!s)return-1;const r=(e[n(634)]-t.audioStartTimestamp)/48e3;return t.jmuxer[n(677)]({audio:s[n(503)],audioSampleAuxInfo:s[n(659)],timestamp:r})}function Ie(t,e,n){const s=Jt,r=ke(n);return t[s(649)]?Ae(r,t,e):Se(r,t,e)}function Ae(t,e,n){const s=Jt;if(t[s(568)][s(567)]){b[s(592)][s(567)].in[s(542)]&&t.dbgMediaDump[s(567)][s(666)](new Uint8Array([0,0,0,1,9,80]));const n=e[s(634)]/90;t[s(568)][s(567)][s(666)](new Uint8Array(e[s(503)]),n)||(t[s(568)][s(567)]=null)}if(t.config[s(567)]&&t.config.video[s(541)]===s(607))return null==n||n[s(512)](e),!1;const r=Date[s(606)]();if(e[s(649)]===s(496)){const n=b[s(442)]>=4;++t[s(645)]<(n?Number.POSITIVE_INFINITY:5)&&(Qt[s(651)](I()+" "+e[s(649)]+", "+e.data[s(672)]+s(462)+(s(597)+t.config[s(484)].currentTime)),n&&1===t[s(645)]&&function(t,e=64,n=64){const s=Jt,r=new Uint8Array(t[s(503)]);let i="",o=0;for(let t=0;t<e&&t<r[s(497)];++t)i+=(r[t]<16?"0":"")+r[t][s(628)](16)+" ";if(o<r[s(497)])for(o<r.length-n&&(i+=s(610),o=r.length-n);o<r[s(497)];o++)i+=(r[o]<16?"0":"")+r[o][s(628)](16)+" ";Qt.info("["+((t.type||"audio")+s(664))+"]: "+i[s(476)]())}(e,128,8)),t[s(505)]=!1,t[s(581)]=0,t[s(580)]=r+t[s(434)]}var i;return t[s(581)]+=e[s(503)][s(672)],!t[s(505)]&&t[s(581)]>oe&&(Qt[s(647)](s(573)),t.keyFrameNeeded=!0),t[s(511)]&&(we(t,e)<0?t[s(505)]=!0:ve(t)),n?(!t[s(505)]||!ie)&&(e[s(503)]=(i=t[s(505)],"H264"===t[s(530)][s(567)][s(600)]?bt(i):Ut(i)),n.enqueue(e)):t[s(505)]!==t.keyFrameNeededPosted&&(t[s(585)]&&t[s(585)].postMessage({keyFrameNeeded:t[s(505)]}),t.keyFrameNeededPosted=t[s(505)]),t.keyFrameNeeded}function Se(t,e,n){const s=Jt;if(t.dbgMediaDump.audio){const n=e[s(634)]/48;t[s(568)][s(555)][s(666)](new Uint8Array(e[s(503)]),n)||(t[s(568)][s(555)]=null)}return t.config.audio&&t[s(530)].audio[s(541)]!==s(607)?e[s(503)][s(672)]>0&&be(t,e):n&&n[s(512)](e),!1}function Ee(){const t=["authToken","customTransform","enforce",") not found in [","DRM config mediaBufferMs should be an integer.","isInteger","No target media element!","persistent-license","FairPlay","rtcdrmerror","size","Duplicate/reordered frame, prev seq: ","keyFrameNeededPosted","frame","catch","cbcs"," bytes, ","Encoded Transform APIs are not available!","onFetch","Platform info:","audioEncrypted","end","). It has to be a string containing a JWT.","prevSeqNum","wvCertificateUrl","supportsEncodedStreams","isChrome","sessionTypes","keySystem","Frame gap: ","trim","jitterBufferTarget","createObjectURL","PlayReady","streams",", curr: ","track","forEach","videoElement","com.apple.fps","get","serverCertificate"," ms)","/license-server-fairplay/","join","keyId","receiver","streamType","wvLicenseUrl","then","key","length","reduce","environment","Invalid authToken type (","split","seq","data","Server certificate fetch failed with error ","keyFrameNeeded","robustness","play","parse","SW_SECURE_CRYPTO","keys","jmuxer","enqueue","createMediaKeys(","392975lfdXlS","PlayReady might not support '","HW_SECURE_ALL","cbcs-1-9","platform","playoutDelayHint","currentTime","fpsCertificateUrl","pipeTo","string","targetLatency not set!","fpsLicenseUrl","sinf"," requesting a new key frame (latency ","merchant",".experiment","config","Fetched certificate from ","opus","warn","SampleAuxInfo extraction failed","outputProtection","Default transform mode enabled, ","buffer","MSE (re)init","BYTES_PER_ELEMENT","Development","encryption","delimited"," bytes","8919kzdJKH","includes","Target video element ("," to ","isFirefox","Widevine","certificate","/license-proxy-widevine/cenc/",'audio/mp4; codecs="opus"',"hwSecurity","cenc","audio","value"," seeking from ","isWindows","Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.","Staging","reportDiscontinuity","indexOf","isArray","Blob","licenseUrl","29183lZVtqj","video","dbgMediaDump","Video codec ","enabled","sessionId","wvCertificate","GOP is getting too long, requesting a new key frame","set","rtcDrmConfigure did not specify audioElement, audio will be dropped","serverCertificateUrl","jitterBufferDelayHint","src","EncodedStreams","nextKeyFrameAllowedTime","bytesSinceKey","6032neTBQT"," too close to seek, ","name","worker","fpsCertificate","object","RTCRtpScriptTransform","requestMediaKeySystemAccess","565928zjpZpt"," is not supported (valid options are AV1 and H264).","mediaDumps","H264","waitingForKeyFrame","). Chrome only supports Widevine and ClearKey.",", restart required: ","playback at ","error","Unable to create Worker!","codec"," will be used","splice","playbackRate","3000","mediaBufferMs","now","clear","/license-proxy-headerauth/drmtoday/RightsManager.asmx","DRM config iv must be an instance of 16-byte long Uint8Array.",".. ","arrayBuffer","ClearKey","emeConfig","). Edge only supports PlayReady, Widevine and ClearKey.","Safari does not support Opus, audio will not be rendered.","Error recovery attempted","status","audioElement","unshift","stringify","No valid DRM config found, call rtcDrmConfigure first.","supportsRtpScriptTransform","buffered","221196rEeVFI","videoCapabilities","videoStartTimestamp","lastKeyFrameTime","toString","Invalid audioElement, it must be an instance of HTMLMediaElement.","slice",") failed","AV1"," will not be created, use rtcDrmFeedFrame to push frames manually","timestamp","Production","postMessage","baseUrl","btoa","crtjson:","Invalid videoElement, it must be an instance of HTMLVideoElement.","DRM config keyId must be an instance of 16-byte long Uint8Array.","prLicenseUrl","Invalid DRM type (","316752cTJVfB","keyFrameLogCntr","durationMs","info","audioCapabilities","type","isEdge","debug","out","760257vmXQou"," - ","kind","', it's safer to use 'cenc' instead.","audioStartTimestamp","paused","sai","/license-server-fairplay/cert/","requestMediaKeySystemAccess(","PlayReady license acquisition might fail without output protection enforced in sessionId CRT.","message"," frame","ignoreAudio","append","pipeThrough","setServerCertificate","isSafari","DRM config env value must be one of: ","createEncodedStreams","byteLength","userId","414VNUroM","DRM config robustness can only be one of: ","Discarding corrupted video frame (too small)","feed","h264","onmessage","keyFrameRequestInterval","srcObject","addEventListener","dispatchEvent","video/mp4","DRM config encryption value must be one of: ","transform","not-allowed","logLevel","next","Worker","setMediaKeys"];return(Ee=function(){return t})()}function Ue(e){const n=Jt;var s,r,i,o,a,c;if(!e||"object"!=typeof e)throw new TypeError("Invalid config argument type, DRM config must be an object.");if(!(e[n(484)]instanceof HTMLVideoElement))throw new TypeError(n(640));if(e.audioElement&&!(e.audioElement instanceof HTMLMediaElement))throw new TypeError(n(629));if(void 0!==e[n(605)]&&!Number[n(451)](e[n(605)]))throw new TypeError(n(450));void 0!==e[n(442)]&&(b[n(442)]=e[n(442)]),Qt[n(651)](n(465),m);let u=!1,d=!1,h=!1;const l=[n(461),n(554),n(607)],f=["SW","HW"];for(const t of[e.video,e[n(555)]])if(t){if(!l[n(545)](t[n(541)]))throw new RangeError(n(439)+l[n(490)](", "));if(te&&t[n(541)]===n(554))throw new RangeError("Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.");if(t[n(541)]!==n(607)){if(d=!0,t[n(491)]){if(!(t[n(491)]instanceof Uint8Array)||16!==t.keyId[n(497)])throw new TypeError(n(641));h=!0}else if(te)throw new ReferenceError("ClearKey is not supported by Safari.");if(t.iv&&(!(t.iv instanceof Uint8Array)||16!==t.iv[n(497)]))throw new TypeError(n(609));if(t.robustness&&!f.includes(t.robustness))throw new RangeError(n(675)+f[n(490)](", "));if(t===e[n(567)]&&t[n(600)]!==n(593)&&t[n(600)]!==n(632))throw new RangeError(n(569)+t.codec+n(591));if(te&&t===e[n(555)]&&t.codec===n(532)&&(u=!0,Qt[n(533)](n(615))),e[n(649)]===n(479)&&(t[n(541)]!==n(554)&&Qt[n(533)](n(515)+t[n(541)]+n(656)),void 0!==e[n(571)]))try{(null===(s=JSON[n(508)](e.sessionId[n(501)](n(639))[1])[n(535)])||void 0===s?void 0:s[n(448)])||Qt[n(533)](n(662))}catch(t){}}}if(d){if(!Xt&&!Zt)throw new Error(n(463));const t=[dt[n(540)],dt[n(560)],dt[n(635)]];if(!t[n(545)](e[n(499)]))throw new RangeError(n(670)+t[n(490)](", "));if(e[n(446)]&&typeof e[n(446)]!==n(523))throw new TypeError(n(500)+typeof e.authToken+n(468));if(e[n(649)])if(te){if("FairPlay"!==e[n(649)])throw new RangeError(n(643)+e[n(649)]+"). Safari only supports FairPlay.")}else if(ne){if(e[n(649)]!==n(549)&&e[n(649)]!==n(612))throw new RangeError(n(643)+e.type+n(595))}else if(ee&&"PlayReady"!==e[n(649)]&&e[n(649)]!==n(549)&&e[n(649)]!==n(612))throw new RangeError(n(643)+e[n(649)]+n(614))}if(void 0!==e.mediaDumps){if(e[n(592)][n(567)]){const t=e[n(592)][n(567)],s=b.mediaDumps.video;(null===(r=t.in)||void 0===r?void 0:r.durationMs)&&(s.in[n(646)]=t.in.durationMs),(null===(i=t.in)||void 0===i?void 0:i[n(542)])&&(s.in[n(542)]=t.in[n(542)]),(null===(o=t.out)||void 0===o?void 0:o[n(646)])&&(s[n(652)].durationMs=t[n(652)][n(646)])}if(e[n(592)][n(555)]){const t=e[n(592)].audio,s=b.mediaDumps[n(555)];(null===(a=t.in)||void 0===a?void 0:a.durationMs)&&(s.in.durationMs=t.in[n(646)]),(null===(c=t[n(652)])||void 0===c?void 0:c[n(646)])&&(s[n(652)][n(646)]=t[n(652)][n(646)])}}let p=he.get(e[n(484)]);!p&&(p=new de(e),he[n(574)](e[n(484)],p)),p[n(570)]=d,p.ignoreAudio=u,p[n(466)]=!u&&p[n(530)][n(555)]&&"clear"!==p[n(530)][n(555)][n(541)],d&&(p.config[n(649)]||(p[n(530)][n(649)]=n(te?454:549)),h||"ClearKey"===p[n(530)].type||(p[n(530)][n(649)]=n(612)),ye(p),function(e){t(this,void 0,void 0,(function*(){const t=Yt;var n,s;let r=e[t(530)][t(484)];if((!e[t(530)][t(567)]||e[t(530)].video[t(541)]===t(607))&&(r=e.config[t(618)]),!r)throw new Error(t(452));r[t(578)]="",r[t(435)]=null,yield r[t(445)](null);let i=null;try{i=yield navigator[t(589)](e[t(474)],e.emeConfig)}catch(t){}if(!i&&e[t(613)][0]){const r=null===(n=e[t(613)][0][t(473)])||void 0===n?void 0:n[t(562)]("persistent-license");if(void 0!==r&&r>=0){null===(s=e[t(613)][0].sessionTypes)||void 0===s||s[t(602)](r,1);try{i=yield navigator[t(589)](e[t(474)],e.emeConfig)}catch(t){}}}if(!i){const n=t(661)+e[t(474)]+t(631);return r[t(437)](new CustomEvent(t(455),{detail:{message:n}})),void Qt[t(598)](n)}let o=null;try{o=yield i.createMediaKeys()}catch(t){}if(!o){const n=t(513)+e[t(474)]+t(631);return r[t(437)](new CustomEvent("rtcdrmerror",{detail:{message:n}})),void Qt[t(598)](n)}if(e[t(487)])Qt[t(651)]("Applying pre-configured certificate ("+e.serverCertificate.byteLength+" bytes)"),yield o.setServerCertificate(e[t(487)]);else if(e.serverCertificateUrl){const n={method:"GET"},s=e[t(576)];try{const i=yield e.config[t(464)]?e.config[t(464)](s,n):fetch(s,n);if(!i.ok){const e=t(504)+i[t(617)];return void r[t(437)](new CustomEvent("rtcdrmerror",{detail:{message:e}}))}const a=yield i[t(611)]();Qt[t(651)](t(531)+s+", "+a[t(672)]+t(543)),yield o[t(668)](a)}catch(e){const n=e[t(584)]+": "+e[t(663)];return Qt[t(598)](n),void r[t(437)](new CustomEvent(t(455),{detail:{message:n}}))}}yield r[t(445)](o),r[t(436)]("encrypted",Gt),ge(e)}))}(p)),p[n(530)][n(484)][n(436)]("play",(function(){const t=n;p[t(530)][t(484)].currentTime>.5&&(p[t(580)]=Date[t(606)]())}))}function Te(t,e){const n=Jt;let s=null;try{s=ke(t)}catch(t){Qt[n(533)](t)}if(!Number[n(451)](e))throw new TypeError("mediaBufferMs should be an integer.");s&&me(s,e)}function ke(t){const e=Jt;if(0===he[e(456)])throw new TypeError(e(621));let n;if(t&&t[e(484)])n=t.videoElement;else{if(1!==he[e(456)])throw new TypeError(e(559));n=he[e(510)]()[e(443)]()[e(556)]}const s=he[e(486)](n);if(!s){let t="";throw he[e(483)](((e,n)=>{t+=n.id+", "})),t=t[e(630)](0,-2),new TypeError(e(546)+n.id+e(449)+t+"]")}return s}function De(t,e){const n=Jt;if(t&&t[n(530)][n(484)]){const s=t[n(530)].videoElement;if(s.buffered[n(497)]>0){const t=s[n(623)][n(467)](s[n(623)][n(497)]-1)-s[n(520)];e[n(519)]=e[n(577)]=e.jitterBufferTarget=t}setTimeout(De,1e3,t,e)}}function Re(t,e){const n=Jt;var s,r,i;const o=t[n(482)][n(655)];o===n(567)&&(t[n(492)][n(519)]=t[n(492)][n(577)]=t[n(492)][n(477)]=0);const a=ke(e),c=a[n(530)][n(484)],u=a[n(530)].audioElement;if(a.enabled){const e=""+n(Xt?579:588);if(a.config[n(447)])Qt[n(651)](e+n(633));else{if(Qt.debug(n(536)+e+n(601)),o===n(567)){const t=b.mediaDumps[n(567)].in.durationMs;t>0&&(a[n(568)].video=new E(n(567),n(432),t))}else if(o===n(555)){const t=b.mediaDumps[n(555)].in[n(646)];t>0&&(a[n(568)][n(555)]=new E(n(555),n(532),t))}if(Xt){const e=o===n(567)?Ae:Se,s={drm:a,transform:(t,n)=>{e(a,t,n)}},r=t[n(492)][n(671)](),i=new TransformStream({transform:s.transform.bind(s)}),{readable:c,writable:u}=r;c[n(667)](i)[n(522)](u)}else if(Zt){if(a[n(585)]=function(t){const e=Jt,n=window.URL||window.webkitURL,s=window[e(564)],r=window[e(444)];if(!(n&&s&&r&&t))return null;const i=new s([t]);return new r(n[e(478)](i))}('const e=Object.freeze({IDR0:0,IDR1:1,Broken:2}),t=[],n=[];let r=0;function o(o){return 0===t.length&&function(){t.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer),t.push(t[e.IDR0].slice(0)),new Uint8Array(t[e.IDR1]).set([16,0,50],27),t.push(new Uint8Array([0,0,0,1,65,154,255,255]).buffer);for(const e of t)n.push(e.slice(0))}(),function(){for(const r of Object.values(e))0===n[r].byteLength&&(n[r]=t[r].slice(0))}(),o?n[e.Broken]:(r^=1,n[r])}const a=Object.freeze({Key:0,Broken:1}),s=[],f=[];function i(e){return 0===s.length&&function(){s.push(new Uint8Array([10,11,0,0,0,4,60,254,252,255,249,128,64,50,23,16,0,156,0,0,0,176,0,0,128,1,197,121,195,220,135,144,202,149,140,242,104,176]).buffer),s.push(new Uint8Array([50,21,48,3,192,128]).buffer);for(const e of s)f.push(e.slice(0))}(),function(){for(const e of Object.values(a))0===f[e].byteLength&&(f[e]=s[e].slice(0))}(),e?f[a.Broken]:f[a.Key]}function u(e,t){postMessage({streamType:"audio",frame:{timestamp:e.timestamp,data:e.data}}),t.enqueue(e)}let c=!1,p="H264";function d(e,t){postMessage({streamType:"video",frame:{type:e.type,timestamp:e.timestamp,data:e.data}}),"key"===e.type&&(c=!1),e.data=function(e,t){return"H264"===t?o(e):i(e)}(c,p),t.enqueue(e)}self.RTCTransformEvent&&(self.onrtctransform=e=>{const t=e.transformer;!function(e,t,n){const r=new TransformStream({transform:"audio"===e?u:d});t.pipeThrough(r).pipeTo(n)}(t.options.operation,t.readable,t.writable)}),onmessage=e=>{void 0!==e.data.codec&&(p=e.data.codec),void 0!==e.data.keyFrameNeeded&&(c=e.data.keyFrameNeeded)}'),null==a.worker)throw new Error(n(599));a.worker[n(636)]({codec:null===(s=a[n(530)][n(567)])||void 0===s?void 0:s[n(600)]}),a[n(585)][n(433)]=t=>{const e=n;t[e(503)][e(493)]===e(567)?Ae(a,t[e(503)].frame,null):Se(a,t.data[e(459)],null)},t[n(492)][n(440)]=new RTCRtpScriptTransform(a[n(585)],{operation:o})}}if(o===n(555)&&(null===(r=a[n(530)][n(555)])||void 0===r?void 0:r[n(541)])===n(607)){if(!u)return void Qt[n(533)](n(575));u[n(435)]!==t.streams[0]&&(u.srcObject=t[n(480)][0]),a[n(530)][n(484)]&&(t[n(492)].playoutDelayHint=t[n(492)][n(577)]=t.receiver[n(477)]=a[n(530)][n(605)],De(a,t.receiver))}else"video"===o&&(null===(i=a[n(530)][n(567)])||void 0===i?void 0:i[n(541)])===n(607)&&c[n(435)]!==t[n(480)][0]&&(c[n(435)]=t[n(480)][0])}else c[n(435)]!==t.streams[0]&&(c[n(435)]=t[n(480)][0])}export{Ue as rtcDrmConfigure,dt as rtcDrmEnvironments,Ie as rtcDrmFeedFrame,rt as rtcDrmGetVersion,Re as rtcDrmOnTrack,Te as rtcDrmSetBufferSize};
